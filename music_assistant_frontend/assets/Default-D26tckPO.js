import{_ as ie,a as Wt,s as t,b as jt,e as ke,c as V,M as E,P as yt,$ as Z,g as xe,R as re,d as _e,f as pe,w as Te,h as ae,i as Le,v as Fe,E as Kt,j as qe,k as et,l as Ct,m as It,n as vt,r as Xe,Q as Gt,o as Yt,p as Ae,q as Xt,t as Jt}from"./index-BhoKnNWl.js";import{R as Zt,b as St,u as ea}from"./vue-router-Y1UxNETo.js";import{c as W}from"./utils-CDN07tui.js";import{d as T,D as h,e as s,u as e,A as q,E as n,h as U,J as Re,K as rt,H as u,f as _,an as ta,b as p,ad as Y,n as ne,$ as K,a1 as I,F as G,P as be,r as Q,c as L,ao as aa,L as ia,M as ue,I as k,ap as la,aq as sa,ar as ra,as as oa,at as na,au as ua,av as ca,aw as da,ax as ma,ay as pa,az as ya,aA as va,aB as fa,o as ge,a0 as ze,al as ha,W as _a,ak as ba,j as Ne,s as We,a as Vt,w as ee,aC as ft,aD as ga,aE as Pa,aF as wa,aG as Tt,m as ka,O as Ee,aH as xa}from"./lucide-CUgULc1Y.js";import{u as je,D as $a,a as Ca,b as Ia,c as Sa,d as Va,e as Ta,f as La,g as Qa,T as Ma,h as Aa,i as Ea,j as Da,k as Ba,P as Oa,l as Fa}from"./reka-ui-CPonaMqy.js";import{v as $e,w as qa,x as Ra,y as za,z as Na}from"./vueuse-BUvXlxtB.js";import{_ as Ua,c as Ha}from"./index-Df_fN0sv.js";import{D as Wa}from"./constants-DWpaQ_qi.js";import{u as ja}from"./vue-i18n-Cet7hT3m.js";import{M as Lt,_ as Qt,i as Ka,a as Ga}from"./MediaItemThumb-BLNsRkDf.js";import{_ as Je}from"./ProviderIcon.vue_vue_type_style_index_0_lang-BeYv4yJp.js";import{T as Ya}from"./Toolbar-BLOvKQRI.js";import{p as Mt,a as Ue,e as tt,b as He,c as Qe,i as Xa,g as Ja,z as at,d as oe,V as ot,A as Za,l as ei,B as At,C as ti,D as it,q as Be,E as Ve,F as ai,G as Ze,H as ii,I as li,n as lt,J as si,K as ri,L as oi,M as ni,N as ui,O as ci,P as di,m as mi,Q as pi,f as yi}from"./vuetify-DpejJ-DC.js";import{M as vi}from"./index-kQIztB-E.js";import{m as ht,M as he}from"./Button-BYrAilMh.js";import{_ as fi,a as hi,b as _i}from"./PopoverTrigger.vue_vue_type_script_setup_true_lang-jeFZp1KS.js";import{V as bi,P as nt,g as gi,a as _t}from"./PlayerCard-DN6aFiOL.js";import{M as fe,a as st}from"./marquee_text_sync-DuWZzfay.js";import{_ as Et}from"./NowPlayingBadge.vue_vue_type_style_index_0_lang-CXN4wDkk.js";import{L as Pi}from"./ListItem-DNExfS_J.js";import{C as De}from"./color-BDgtjUiw.js";import{u as wi}from"./userPreferences-pSY7-Aew.js";import"./qrcode-CK8KsgMo.js";import"./marked-C0Rlrcoy.js";/* empty css            */import"./swiper-HCRODQv4.js";const ki=ie(Wt,[["__scopeId","data-v-12dd6097"]]),xi=T({__name:"Sheet",props:{open:{type:Boolean},defaultOpen:{type:Boolean},modal:{type:Boolean}},emits:["update:open"],setup(a,{emit:l}){const d=je(a,l);return(o,c)=>(s(),h(e($a),q({"data-slot":"sheet"},e(d)),{default:n(y=>[U(o.$slots,"default",Re(rt(y)))]),_:3},16))}}),$i=T({__name:"SheetOverlay",props:{forceMount:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(a){const l=a,i=$e(l,"class");return(r,d)=>(s(),h(e(Ca),q({"data-slot":"sheet-overlay",class:e(W)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/80",l.class)},e(i)),{default:n(()=>[U(r.$slots,"default")]),_:3},16,["class"]))}}),Ci=T({inheritAttrs:!1,__name:"SheetContent",props:{class:{default:void 0},side:{default:"right"},forceMount:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(a,{emit:l}){const i=a,r=l,d=$e(i,"class","side"),o=je(d,r);return(c,y)=>(s(),h(e(Ia),null,{default:n(()=>[u($i),u(e(Sa),q({"data-slot":"sheet-content",class:e(W)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",a.side==="right"&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",a.side==="left"&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",a.side==="top"&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",a.side==="bottom"&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",i.class)},{...c.$attrs,...e(o)}),{default:n(()=>[U(c.$slots,"default"),u(e(Va),{class:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none"},{default:n(()=>[u(e(ta),{class:"size-4"}),y[0]||(y[0]=_("span",{class:"sr-only"},"Close",-1))]),_:1})]),_:3},16,["class"])]),_:3}))}}),Ii=T({__name:"SheetDescription",props:{asChild:{type:Boolean},as:{},class:{}},setup(a){const l=a,i=$e(l,"class");return(r,d)=>(s(),h(e(Ta),q({"data-slot":"sheet-description",class:e(W)("text-muted-foreground text-sm",l.class)},e(i)),{default:n(()=>[U(r.$slots,"default")]),_:3},16,["class"]))}}),Si=T({__name:"SheetHeader",props:{class:{}},setup(a){const l=a;return(i,r)=>(s(),p("div",{"data-slot":"sheet-header",class:Y(e(W)("flex flex-col gap-1.5 p-4",l.class))},[U(i.$slots,"default")],2))}}),Vi=T({__name:"SheetTitle",props:{asChild:{type:Boolean},as:{},class:{}},setup(a){const l=a,i=$e(l,"class");return(r,d)=>(s(),h(e(La),q({"data-slot":"sheet-title",class:e(W)("text-foreground font-semibold",l.class)},e(i)),{default:n(()=>[U(r.$slots,"default")]),_:3},16,["class"]))}}),bt="sidebar_state",Ti=3600*24*7,Li="16rem",Qi="18rem",Mi="3rem",Ai="b",[ut,Ei]=Qa("Sidebar"),Di={class:"flex h-full w-full flex-col"},Bi=["data-state","data-collapsible","data-variant","data-side"],Oi={"data-sidebar":"sidebar",class:"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm"},Fi=T({inheritAttrs:!1,__name:"Sidebar",props:{side:{default:"left"},variant:{default:"sidebar"},collapsible:{default:"offcanvas"},class:{}},setup(a){const l=a,{isMobile:i,state:r,openMobile:d,setOpenMobile:o}=ut();return(c,y)=>a.collapsible==="none"?(s(),p("div",q({key:0,"data-slot":"sidebar",class:e(W)("bg-sidebar text-sidebar-foreground flex h-full w-(--sidebar-width) flex-col",l.class)},c.$attrs),[U(c.$slots,"default")],16)):e(i)?(s(),h(e(xi),q({key:1,open:e(d)},c.$attrs,{"onUpdate:open":e(o)}),{default:n(()=>[u(e(Ci),{"data-sidebar":"sidebar","data-slot":"sidebar","data-mobile":"true",side:a.side,class:"bg-sidebar text-sidebar-foreground w-(--sidebar-width) p-0 [&>button]:hidden",style:ne({"--sidebar-width":e(Qi)})},{default:n(()=>[u(Si,{class:"sr-only"},{default:n(()=>[u(Vi,null,{default:n(()=>[...y[0]||(y[0]=[K("Sidebar",-1)])]),_:1}),u(Ii,null,{default:n(()=>[...y[1]||(y[1]=[K("Displays the mobile sidebar.",-1)])]),_:1})]),_:1}),_("div",Di,[U(c.$slots,"default")])]),_:3},8,["side","style"])]),_:3},16,["open","onUpdate:open"])):(s(),p("div",{key:2,class:"group peer text-sidebar-foreground hidden md:block","data-slot":"sidebar","data-state":e(r),"data-collapsible":e(r)==="collapsed"?a.collapsible:"","data-variant":a.variant,"data-side":a.side},[_("div",{class:Y(e(W)("relative w-(--sidebar-width) bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",a.variant==="floating"||a.variant==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4)))]":"group-data-[collapsible=icon]:w-(--sidebar-width-icon)"))},null,2),_("div",q({class:e(W)("fixed inset-y-0 z-10 hidden h-svh w-(--sidebar-width) transition-[left,right,width] duration-200 ease-linear md:flex",a.side==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",a.variant==="floating"||a.variant==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4))+2px)]":"group-data-[collapsible=icon]:w-(--sidebar-width-icon)",l.class)},c.$attrs),[_("div",Oi,[U(c.$slots,"default")])],16)],8,Bi))}}),qi=T({__name:"SidebarContent",props:{class:{}},setup(a){const l=a;return(i,r)=>(s(),p("div",{"data-slot":"sidebar-content","data-sidebar":"content",class:Y(e(W)("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",l.class))},[U(i.$slots,"default")],2))}}),Ri=T({__name:"SidebarFooter",props:{class:{}},setup(a){const l=a;return(i,r)=>(s(),p("div",{"data-slot":"sidebar-footer","data-sidebar":"footer",class:Y(e(W)("flex flex-col gap-2 p-2 pb-26 ml-auto",l.class))},[U(i.$slots,"default")],2))}}),zi=T({__name:"SidebarGroup",props:{class:{}},setup(a){const l=a;return(i,r)=>(s(),p("div",{"data-slot":"sidebar-group","data-sidebar":"group",class:Y(e(W)("relative flex w-full min-w-0 flex-col p-2",l.class))},[U(i.$slots,"default")],2))}}),Ni=T({__name:"SidebarGroupContent",props:{class:{}},setup(a){const l=a;return(i,r)=>(s(),p("div",{"data-slot":"sidebar-group-content","data-sidebar":"group-content",class:Y(e(W)("w-full text-sm",l.class))},[U(i.$slots,"default")],2))}}),Ui=T({__name:"SidebarHeader",props:{class:{}},setup(a){const l=a;return(i,r)=>(s(),p("div",{"data-slot":"sidebar-header","data-sidebar":"header",class:Y(e(W)("flex flex-col gap-2 p-2",l.class))},[U(i.$slots,"default")],2))}}),Hi=T({__name:"SidebarInset",props:{class:{}},setup(a){const l=a;return(i,r)=>(s(),p("main",{"data-slot":"sidebar-inset",class:Y(e(W)("bg-background relative flex min-w-0 flex-1 flex-col overflow-x-hidden","md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2",l.class))},[U(i.$slots,"default")],2))}}),Dt=T({__name:"SidebarMenu",props:{class:{}},setup(a){const l=a;return(i,r)=>(s(),p("ul",{"data-slot":"sidebar-menu","data-sidebar":"menu",class:Y(e(W)("flex w-full min-w-0 flex-col gap-1",l.class))},[U(i.$slots,"default")],2))}}),Wi=T({__name:"Tooltip",props:{defaultOpen:{type:Boolean},open:{type:Boolean},delayDuration:{},disableHoverableContent:{type:Boolean},disableClosingTrigger:{type:Boolean},disabled:{type:Boolean},ignoreNonKeyboardFocus:{type:Boolean}},emits:["update:open"],setup(a,{emit:l}){const d=je(a,l);return(o,c)=>(s(),h(e(Ma),q({"data-slot":"tooltip"},e(d)),{default:n(y=>[U(o.$slots,"default",Re(rt(y)))]),_:3},16))}}),ji=T({inheritAttrs:!1,__name:"TooltipContent",props:{forceMount:{type:Boolean},ariaLabel:{},asChild:{type:Boolean},as:{},side:{},sideOffset:{default:4},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},class:{default:void 0}},emits:["escapeKeyDown","pointerDownOutside"],setup(a,{emit:l}){const i=a,r=l,d=$e(i,"class"),o=je(d,r);return(c,y)=>(s(),h(e(Aa),null,{default:n(()=>[u(e(Ea),q({"data-slot":"tooltip-content"},{...e(o),...c.$attrs},{class:e(W)("bg-foreground text-background animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit rounded-md px-3 py-1.5 text-xs text-balance",i.class)}),{default:n(()=>[U(c.$slots,"default"),u(e(Da),{class:"bg-foreground fill-foreground z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]),_:3},16,["class"])]),_:3}))}}),Ki=T({__name:"TooltipTrigger",props:{reference:{},asChild:{type:Boolean},as:{}},setup(a){const l=a;return(i,r)=>(s(),h(e(Ba),q({"data-slot":"tooltip-trigger"},l),{default:n(()=>[U(i.$slots,"default")]),_:3},16))}}),gt=T({__name:"SidebarMenuButtonChild",props:{variant:{default:"default"},size:{default:"default"},isActive:{type:Boolean},class:{default:void 0},asChild:{type:Boolean},as:{default:"button"}},setup(a){const l=a;return(i,r)=>(s(),h(e(Oa),q({"data-slot":"sidebar-menu-button","data-sidebar":"menu-button","data-size":a.size,"data-active":a.isActive,class:e(W)(e(Zi)({variant:a.variant,size:a.size}),l.class),as:a.as,"as-child":a.asChild},i.$attrs),{default:n(()=>[U(i.$slots,"default")]),_:3},16,["data-size","data-active","class","as","as-child"]))}}),Gi=T({inheritAttrs:!1,__name:"SidebarMenuButton",props:{variant:{default:"default"},size:{default:"default"},isActive:{type:Boolean},class:{},asChild:{type:Boolean},as:{default:"button"},tooltip:{default:void 0}},setup(a){const l=a,{isMobile:i,state:r}=ut(),d=$e(l,"tooltip");return(o,c)=>a.tooltip?(s(),h(e(Wi),{key:1},{default:n(()=>[u(e(Ki),{"as-child":""},{default:n(()=>[u(gt,Re(rt({...e(d),...o.$attrs})),{default:n(()=>[U(o.$slots,"default")]),_:3},16)]),_:3}),u(e(ji),{side:"right",align:"center",hidden:e(r)!=="collapsed"||e(i)},{default:n(()=>[typeof a.tooltip=="string"?(s(),p(G,{key:0},[K(I(a.tooltip),1)],64)):(s(),h(be(a.tooltip),{key:1}))]),_:1},8,["hidden"])]),_:3})):(s(),h(gt,Re(q({key:0},{...e(d),...o.$attrs})),{default:n(()=>[U(o.$slots,"default")]),_:3},16))}}),Yi=T({__name:"SidebarMenuItem",props:{class:{}},setup(a){const l=a;return(i,r)=>(s(),p("li",{"data-slot":"sidebar-menu-item","data-sidebar":"menu-item",class:Y(e(W)("group/menu-item relative",l.class))},[U(i.$slots,"default")],2))}}),Xi=T({__name:"SidebarProvider",props:{defaultOpen:{type:Boolean,default:!Na?.cookie.includes(`${bt}=false`)},open:{type:Boolean,default:void 0},class:{default:void 0}},emits:["update:open"],setup(a,{emit:l}){const i=a,r=l,d=qa("(max-width: 768px)"),o=Q(!1),c=Ra(i,"open",r,{defaultValue:i.defaultOpen??!1,passive:i.open===void 0});function y(S){c.value=S,document.cookie=`${bt}=${c.value}; path=/; max-age=${Ti}`}function w(S){o.value=S}function M(){return d.value?w(!o.value):y(!c.value)}za("keydown",S=>{S.key===Ai&&(S.metaKey||S.ctrlKey)&&(S.preventDefault(),M())});const A=L(()=>c.value?"expanded":"collapsed");return Ei({state:A,open:c,setOpen:y,isMobile:d,openMobile:o,setOpenMobile:w,toggleSidebar:M}),(S,f)=>(s(),h(e(Fa),{"delay-duration":0},{default:n(()=>[_("div",q({"data-slot":"sidebar-wrapper",style:{"--sidebar-width":e(Li),"--sidebar-width-icon":e(Mi)},class:e(W)("group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full",i.class)},S.$attrs),[U(S.$slots,"default")],16)]),_:3}))}}),Ji=T({__name:"SidebarTrigger",props:{class:{}},setup(a){const l=a,{toggleSidebar:i}=ut();return(r,d)=>(s(),h(e(Ua),{"data-sidebar":"trigger","data-slot":"sidebar-trigger",variant:"ghost",size:"icon",class:Y(e(W)("h-10 w-10",l.class)),onClick:e(i)},{default:n(()=>[u(e(aa)),d[0]||(d[0]=_("span",{class:"sr-only"},"Toggle Sidebar",-1))]),_:1},8,["class","onClick"]))}}),Zi=Ha("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:p-0!"}},defaultVariants:{variant:"default",size:"default"}}),el=T({__name:"NavMain",props:{items:{}},setup(a){const l=ia(Zt),i=St(),r=d=>i.path===d||i.path.startsWith(d+"/");return(d,o)=>(s(),h(e(zi),null,{default:n(()=>[u(e(Ni),{class:"flex flex-col gap-2"},{default:n(()=>[u(e(Dt),null,{default:n(()=>[(s(!0),p(G,null,ue(a.items,c=>(s(),h(e(Yi),{key:c.title,class:"mr-1.5"},{default:n(()=>[u(e(Gi),q({as:e(l)},{ref_for:!0},{to:c.url},{"is-active":r(c.url),tooltip:c.title,class:"no-underline font-semibold text-sm"}),{default:n(()=>[c.icon?(s(),h(be(c.icon),{key:0,class:"mr-1"})):k("",!0),_("span",null,I(c.title),1)]),_:2},1040,["as","is-active","tooltip"])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}))}}),tl=ie(el,[["__scopeId","data-v-9904e199"]]),Bt=function(){const a=localStorage.getItem("frontend.settings.menu_items"),l=a?a.split(","):Wa,i=[];for(const r of l)r==="home"&&i.push({label:"home",icon:la,path:"/home",isLibraryNode:!1}),r==="search"&&i.push({label:"search",icon:sa,path:"/search",isLibraryNode:!1}),r==="artists"&&i.push({label:"artists",icon:ra,path:"/artists",isLibraryNode:!0,hidden:t.libraryArtistsCount===0}),r==="albums"&&i.push({label:"albums",icon:oa,path:"/albums",isLibraryNode:!0,hidden:t.libraryAlbumsCount===0}),r==="tracks"&&i.push({label:"tracks",icon:na,path:"/tracks",isLibraryNode:!0,hidden:t.libraryTracksCount===0}),r==="playlists"&&i.push({label:"playlists",icon:ua,path:"/playlists",isLibraryNode:!0,hidden:t.libraryPlaylistsCount===0}),r==="audiobooks"&&i.push({label:"audiobooks",icon:ca,path:"/audiobooks",isLibraryNode:!0,hidden:t.libraryAudiobooksCount===0}),r==="podcasts"&&i.push({label:"podcasts",icon:da,path:"/podcasts",isLibraryNode:!0,hidden:t.libraryPodcastsCount===0}),r==="radios"&&i.push({label:"radios",icon:ma,path:"/radios",isLibraryNode:!0,hidden:t.libraryRadiosCount===0}),r==="schedule"&&i.push({label:"schedule.title",icon:pa,path:"/schedule",isLibraryNode:!1}),r==="video"&&i.push({label:"video_files.title",icon:ya,path:"/video",isLibraryNode:!1}),r==="browse"&&i.push({label:"browse",icon:va,path:"/browse",isLibraryNode:!0}),r==="settings"&&i.push({label:"settings.settings",icon:fa,path:"/settings",isLibraryNode:!0});return i},al=T({__name:"AppSidebar",setup(a){const l=ea(),{t:i}=ja(),r=Bt(),d=L(()=>r.filter(o=>!o.hidden).map(o=>({title:i(o.label),url:o.path,icon:o.icon})));return(o,c)=>(s(),h(e(Fi),{collapsible:"icon"},{default:n(()=>[u(e(Ui),null,{default:n(()=>[u(e(Dt),null,{default:n(()=>[_("div",{class:"sidebar-header",onClick:c[0]||(c[0]=y=>e(l).push("/"))},[...c[1]||(c[1]=[_("img",{src:jt,alt:"Media Assistant",class:"sidebar-header-logo"},null,-1),_("div",{class:"sidebar-header-title"},"Media Assistant",-1)])])]),_:1})]),_:1}),u(e(qi),null,{default:n(()=>[u(tl,{items:d.value},null,8,["items"])]),_:1}),u(e(Ri),null,{default:n(()=>[u(e(Ji),{class:"-ml-1"})]),_:1})]),_:1}))}}),il=ie(al,[["__scopeId","data-v-1e064b38"]]),ll={class:"media-thumb"},sl={style:{"margin-left":"-10px","padding-right":"5px"}},rl=T({__name:"AddToPlaylistDialog",setup(a){const l=Q(!1),i=Q([]),r=Q([]),d=Q(),o=Q([]);ge(()=>{ke.on("playlistdialog",async A=>{l.value=!0,o.value=A.items,d.value=A.parentItem,await c()}),ze(()=>{ke.off("playlistdialog")})});const c=async function(){i.value=[],r.value=[];const A=await V.getLibraryPlaylists();let S=o.value.length?o.value[0]:void 0;if(S){"provider_mappings"in S||(S=await V.getItem(S.media_type,S.item_id,S.provider));for(const f of A){if(!f.provider_mappings.filter(O=>O.available).length||!f.is_editable||d.value&&d.value.media_type===E.PLAYLIST&&f.item_id===d.value.item_id)continue;const R=V.providers[f.provider_mappings[0].provider_instance];R&&(R.domain=="builtin"||R.is_streaming_provider||S?.provider_mappings.filter(O=>O.provider_instance==R.instance_id).length)&&i.value.push(f)}for(const f of Object.values(V.providers))f.supported_features.includes(yt.PLAYLIST_CREATE)&&f.supported_features.includes(yt.PLAYLIST_TRACKS_EDIT)&&(f.domain=="builtin"||f.is_streaming_provider||S?.provider_mappings.filter(R=>R.provider_instance==f.instance_id).length)&&r.value.push(f.instance_id)}},y=async function(A){V.addPlaylistTracks(A.item_id,o.value.map(S=>S.uri)),M(),Xa.info(Z("background_task_added"))},w=async function(A){const S=prompt(Z("new_playlist_name"));if(!S)return;const f=await V.createPlaylist(S,A);y(f)},M=function(){l.value=!1};return(A,S)=>(s(),h(Mt,{modelValue:l.value,"onUpdate:modelValue":[S[0]||(S[0]=f=>l.value=f),S[1]||(S[1]=f=>{e(t).dialogActive=f})],fullscreen:"",transition:"dialog-bottom-transition"},{default:n(()=>[u(Ue,null,{default:n(()=>[u(Ya,{icon:"mdi-playlist-plus",title:e(Z)("add_playlist"),"menu-items":[{label:"close",icon:"mdi-close",action:M}]},null,8,["title","menu-items"]),u(tt),S[4]||(S[4]=_("br",null,null,-1)),u(He,null,{default:n(()=>[(s(!0),p(G,null,ue(i.value,f=>(s(),p("div",{key:f.item_id},[u(Qe,{onClick:R=>y(f)},{prepend:n(()=>[_("div",ll,[u(Lt,{item:f,size:50},null,8,["item"])])]),title:n(()=>[_("div",null,I(f.name),1)]),subtitle:n(()=>[_("div",null,I(f.owner),1)]),append:n(()=>[f.provider_mappings?(s(),h(Je,{key:0,domain:f.provider_mappings[0].provider_domain,size:20},null,8,["domain"])):k("",!0)]),_:2},1032,["onClick"])]))),128)),S[2]||(S[2]=_("div",{style:{height:"30px"}},null,-1)),u(tt),S[3]||(S[3]=_("div",{style:{height:"30px"}},null,-1)),(s(!0),p(G,null,ue(r.value,f=>(s(),p("div",{key:f},[u(Qe,{onClick:R=>w(f)},{prepend:n(()=>[_("div",sl,[u(Je,{domain:e(V).providers[f].domain,size:50},null,8,["domain"])])]),title:n(()=>[_("div",null,I(e(Z)("new_playlist")),1)]),subtitle:n(()=>[_("div",null,I(e(Z)("create_playlist_on",[e(V).providers[f].name])),1)]),append:n(()=>[u(Je,{domain:e(V).providers[f].domain,size:20},null,8,["domain"])]),_:2},1032,["onClick"])]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),ol=ie(rl,[["__scopeId","data-v-8f34ca82"]]),nl=T({__name:"View",setup(a){return(l,i)=>{const r=ha("router-view");return s(),h(Ja,{id:"cont",class:Y(["main-layout",{"main-layout--mobile":e(t).mobileLayout}])},{default:n(()=>[u(e(Xi),null,{default:n(()=>[e(t).mobileLayout?k("",!0):(s(),h(il,{key:0})),u(e(Hi),null,{default:n(()=>[_("div",{class:Y(["content-section",{"content-section--mobile":e(t).mobileLayout}])},[u(r,null,{default:n(({Component:d})=>[(s(),h(be(d)))]),_:1}),u(ol),u(ki)],2)]),_:1})]),_:1})]),_:1},8,["class"])}}}),Pt=ie(nl,[["__scopeId","data-v-15e3d043"]]),ul=a=>{const l=L(()=>{const{variant:o,width:c,height:y,staticWidth:w,staticHeight:M,maxWidth:A,maxHeight:S,minWidth:f,minHeight:R,badge:O,...te}=a,j={...te,size:a.size||w||void 0||M||void 0||(a.maxHeight?a.maxHeight:void 0)||(a.maxWidth?a.maxWidth:void 0)||"24px"};return vi(o).with("button",()=>({...j,class:a.class?`icon-button ${a.class}`:"icon-button"})).with("responsive",()=>({...j,class:a.class?`icon-responsive ${a.class}`:"icon-responsive"})).with("default",()=>({...j,class:a.class?`icon-default ${a.class}`:"icon-default"})).otherwise(()=>({...j,class:a.class?`icon-default ${a.class}`:"icon-default"}))}),i=L(()=>{const o={};if(a.staticWidth?o.width=a.staticWidth:a.width&&(o.width=a.width),a.staticHeight?o.height=a.staticHeight:a.height&&(o.height=a.height),a.maxWidth&&(o.maxWidth=a.maxWidth),a.maxHeight&&(o.maxHeight=a.maxHeight),a.minWidth&&(o.minWidth=a.minWidth),a.minHeight&&(o.minHeight=a.minHeight),typeof a.style=="object")Object.assign(o,a.style);else if(typeof a.style=="string"){const c=a.style.split(";").reduce((y,w)=>{const[M,A]=w.split(":").map(S=>S.trim());return M&&A&&(y[M]=A),y},{});Object.assign(o,c)}return o}),r=L(()=>ht("icon-container",a.variant&&`icon-container--${a.variant}`,a.disabled&&"icon-container--disabled")),d=L(()=>ht("icon",a.variant&&`icon--${a.variant}`));return{iconProps:l,containerStyle:i,containerClasses:r,iconClasses:d}},cl={variant:"default",minWidth:"24px",minHeight:"24px",badge:!1,disabled:!1},dl=T({__name:"Icon",props:_a({variant:{},width:{},height:{},staticWidth:{},staticHeight:{},maxWidth:{},maxHeight:{},minWidth:{},minHeight:{},icon:{},color:{},disabled:{type:Boolean},size:{},badge:{type:Boolean},class:{},style:{}},cl),emits:["click"],setup(a,{emit:l}){const i=a,r=l,{iconProps:d,containerStyle:o,containerClasses:c,iconClasses:y}=ul(i),w=Q(),M=Q(),A=async()=>{if(!(i.variant!=="responsive"||!w.value||!M.value)){await Ne();try{const f=w.value.offsetWidth,R=w.value.offsetHeight,O=Math.min(f,R);M.value.$el&&(M.value.$el.style.fontSize=`${O}px`)}catch(f){console.error("Icon sizing adjustment failed:",f)}}},S=f=>{if(i.disabled){f.preventDefault(),f.stopPropagation();return}r("click",f)};return ge(()=>{i.variant==="responsive"&&(A(),window.addEventListener("resize",A))}),ze(()=>{i.variant==="responsive"&&window.removeEventListener("resize",A)}),(f,R)=>(s(),p("div",{ref_key:"iconContainer",ref:w,class:Y(e(c)),style:ne(e(o)),onClick:S},[u(at,{"model-value":a.badge===!0,color:"error",dot:""},{default:n(()=>[u(e(oe),q({ref_key:"iconElement",ref:M},e(d),{class:e(y)}),ba({_:2},[ue(f.$slots,(O,te)=>({name:te,fn:n(()=>[U(f.$slots,te,{},void 0,!0)])}))]),1040,["class"])]),_:3},8,["model-value"])],6))}}),Pe=ie(dl,[["__scopeId","data-v-3db51b10"]]),Ot=T({__name:"RepeatBtn",props:{playerQueue:{},isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(a){return(l,i)=>a.isVisible&&a.playerQueue?(s(),h(Pe,q({key:0},a.icon,{disabled:!a.playerQueue.active||a.playerQueue.items==0,color:e(xe)(a.icon?.color,[[a.playerQueue.repeat_mode==e(re).OFF,null],[a.playerQueue.repeat_mode==e(re).ALL,"primary"],[a.playerQueue.repeat_mode==e(re).ONE,"primary"]]),icon:e(xe)(a.icon?.icon,[[a.playerQueue.repeat_mode==e(re).OFF,"mdi-repeat-off"],[a.playerQueue.repeat_mode==e(re).ALL,"mdi-repeat"],[a.playerQueue.repeat_mode==e(re).ONE,"mdi-repeat-once"],[!0,"mdi-repeat-off"]]),variant:"button",onClick:i[0]||(i[0]=r=>e(V).queueCommandRepeat(a.playerQueue.queue_id||"",e(xe)(null,[[a.playerQueue.repeat_mode==e(re).OFF,e(re).ALL],[a.playerQueue.repeat_mode==e(re).ALL,e(re).ONE],[a.playerQueue.repeat_mode==e(re).ONE,e(re).OFF]])))}),null,16,["disabled","color","icon"])):k("",!0)}});function Ke(a){return{activeSource:L(()=>{const i=typeof a=="object"&&"value"in a?a.value:a;if(!(!i?.active_source||!i?.source_list))return i.source_list.find(r=>r.id===i.active_source)})}}const Ft=T({__name:"NextBtn",props:{player:{},playerQueue:{default:void 0},isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(a){const l=a,{activeSource:i}=Ke(We(l,"player")),r=L(()=>l.playerQueue?.active?(l.playerQueue.current_index||0)<l.playerQueue.items-1:!1),d=L(()=>!l.player||l.playerQueue?.active||!l.player.current_media?!1:l.player.supported_features.includes(_e.NEXT_PREVIOUS)),o=L(()=>i.value?i.value.can_next_previous:r.value||d.value);return(c,y)=>a.isVisible&&a.player?(s(),h(Pe,q({key:0},a.icon,{disabled:!o.value,icon:"mdi-skip-next-outline",variant:"button",onClick:y[0]||(y[0]=w=>e(V).playerCommandNext(a.player.player_id))}),null,16,["disabled"])):k("",!0)}}),qt=T({__name:"PlayBtn",props:{player:{},playerQueue:{default:void 0},isVisible:{type:Boolean,default:!0},withCircle:{type:Boolean,default:!0},icon:{default:void 0},iconStyle:{default:"circle"}},setup(a){const l=a,{activeSource:i}=Ke(We(l,"player")),r=L(()=>l.playerQueue?l.playerQueue.items>0:!1),d=L(()=>!(!l.player||l.playerQueue?.active||!l.player.current_media)),o=L(()=>i.value?i.value.can_play_pause:r.value||d.value),c=L(()=>l.player?.playback_state==pe.PLAYING?"mdi-pause":"mdi-play");return(y,w)=>a.isVisible&&a.player?(s(),h(Pe,q({key:0},a.icon,{disabled:!o.value,icon:a.iconStyle?`${c.value}-${a.iconStyle}`:c.value,variant:"button",onClick:w[0]||(w[0]=M=>e(V).playerCommandPlayPause(a.player.player_id))}),null,16,["disabled","icon"])):k("",!0)}}),Rt=T({__name:"PreviousBtn",props:{player:{},playerQueue:{default:void 0},isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(a){const l=a,{activeSource:i}=Ke(We(l,"player")),r=L(()=>!l.playerQueue?.active||!l.playerQueue?.items||!l.playerQueue.current_index?!1:l.playerQueue.current_index>0),d=L(()=>!l.player||l.playerQueue?.active||!l.player.current_media?!1:l.player.supported_features.includes(_e.NEXT_PREVIOUS)),o=L(()=>i.value?i.value.can_next_previous:r.value||d.value);return(c,y)=>a.isVisible&&a.player?(s(),h(Pe,q({key:0},a.icon,{disabled:!o.value,icon:"mdi-skip-previous-outline",variant:"button",onClick:y[0]||(y[0]=w=>e(V).playerCommandPrevious(a.player.player_id))}),null,16,["disabled"])):k("",!0)}}),zt=T({__name:"ShuffleBtn",props:{playerQueue:{},isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(a){return(l,i)=>a.isVisible&&a.playerQueue?(s(),h(Pe,q({key:0},a.icon,{disabled:!a.playerQueue.active||a.playerQueue.items==0,color:e(xe)(a.icon?.color,[[a.playerQueue.shuffle_enabled,"primary",""]]),icon:e(xe)(a.icon?.icon,[[a.playerQueue.shuffle_enabled,"mdi-shuffle"],[a.playerQueue.shuffle_enabled==!1,"mdi-shuffle-disabled"],[!0,"mdi-shuffle"]]),variant:"button",onClick:i[0]||(i[0]=r=>e(V).queueCommandShuffle(a.playerQueue.queue_id,!a.playerQueue.shuffle_enabled))}),null,16,["disabled","color","icon"])):k("",!0)}}),ml={key:0,class:"player-controls"},pl={key:0,class:"player-controls-elements"},yl={key:1,class:"player-controls-elements"},vl={key:2},fl={key:3,class:"player-controls-elements"},hl={key:4,class:"player-controls-elements"},wt=T({__name:"PlayerControls",props:{visibleComponents:{default:()=>({repeat:{isVisible:!0},shuffle:{isVisible:!0},play:{isVisible:!0},previous:{isVisible:!0},next:{isVisible:!0}})}},setup(a){return(l,i)=>a.visibleComponents?(s(),p("div",ml,[a.visibleComponents&&a.visibleComponents.shuffle?.isVisible?(s(),p("div",pl,[u(zt,{"player-queue":e(t).activePlayerQueue,class:"media-controls-item",icon:a.visibleComponents.shuffle.icon},null,8,["player-queue","icon"])])):k("",!0),a.visibleComponents&&a.visibleComponents.previous?.isVisible?(s(),p("div",yl,[u(Rt,{player:e(t).activePlayer,"player-queue":e(t).activePlayerQueue,class:"media-controls-item",icon:a.visibleComponents.previous.icon},null,8,["player","player-queue","icon"])])):k("",!0),a.visibleComponents&&a.visibleComponents.play?.isVisible?(s(),p("div",vl,[u(qt,{player:e(t).activePlayer,"player-queue":e(t).activePlayerQueue,class:"media-controls-item","icon-style":"circle",icon:a.visibleComponents.play.icon},null,8,["player","player-queue","icon"])])):k("",!0),a.visibleComponents&&a.visibleComponents.next?.isVisible?(s(),p("div",fl,[u(Ft,{player:e(t).activePlayer,"player-queue":e(t).activePlayerQueue,icon:a.visibleComponents.next.icon,"static-height":"24px","static-width":"24px"},null,8,["player","player-queue","icon"])])):k("",!0),a.visibleComponents&&a.visibleComponents.repeat?.isVisible?(s(),p("div",hl,[u(Ot,{"player-queue":e(t).activePlayerQueue,icon:a.visibleComponents.repeat.icon,"static-height":"24px","static-width":"24px"},null,8,["player-queue","icon"])])):k("",!0)])):k("",!0)}}),Nt=T({__name:"QueueBtn",props:{isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(a){const l=function(){t.showFullscreenPlayer&&t.showQueueItems?t.showQueueItems=!1:t.showFullscreenPlayer&&!t.showQueueItems?t.showQueueItems=!0:(t.showQueueItems=!0,t.showFullscreenPlayer=!0)};return(i,r)=>a.isVisible?(s(),h(Pe,q({key:0},a.icon,{disabled:!e(t).activePlayerId||e(t).showFullscreenPlayer&&!e(t).curQueueItem&&!e(t).showQueueItems,icon:"mdi-playlist-play",color:e(xe)(a.icon?.color,[[e(t).showFullscreenPlayer&&e(t).showQueueItems,"primary",""]]),variant:"button",onClick:l}),null,16,["disabled","color"])):k("",!0)}}),_l={class:"tip-content"},bl={class:"tip-label"},gl={class:"tip-player-name"},Pl={class:"tip-hint"},Ut=T({__name:"SpeakerBtn",props:{color:{}},setup(a){const l=Q(!1);let i=!1;const r=L(()=>t.activePlayer?.playback_state===pe.PLAYING||t.activePlayer?.playback_state===pe.PAUSED),d=L(()=>!(i||t.playerTipShown||!t.activePlayer||t.activePlayerId===Te.player_id));function o(){l.value=!1,i=!0,t.playerTipShown=!0}function c(){o(),t.showPlayersMenu=!0}function y(){l.value&&o()}return ge(()=>{if(t.playerTipShown){i=!0;return}setTimeout(()=>{d.value&&(l.value=!0,document.addEventListener("click",y,{capture:!0}))},1e3)}),Vt(()=>{document.removeEventListener("click",y,{capture:!0})}),ee(()=>t.playerTipShown,w=>{w&&l.value&&(l.value=!1,i=!0)}),ee(l,(w,M)=>{M&&!w&&(i=!0,t.playerTipShown=!0)}),(w,M)=>(s(),h(e(fi),{open:l.value,"onUpdate:open":M[0]||(M[0]=A=>l.value=A)},{default:n(()=>[u(e(hi),{"as-child":""},{default:n(()=>[u(he,{variant:"icon",ripple:!1,icon:"",onClick:c},{default:n(()=>[u(oe,{color:a.color?a.color:"",size:24,icon:e(t).activePlayer?.group_members.length?"mdi-speaker-multiple":"mdi-speaker"},null,8,["color","icon"])]),_:1})]),_:1}),u(e(_i),{side:"top","side-offset":8,class:"player-tip",onPointerDownOutside:o,onEscapeKeyDown:o,onFocusOutside:o},{default:n(()=>[_("div",_l,[_("div",bl,I(r.value?w.$t("player_tip.currently_playing"):w.$t("player_tip.selected_player")),1),_("div",gl,I(e(t).activePlayer?.name),1),_("div",Pl,I(w.$t("player_tip.click_to_change")),1)]),M[1]||(M[1]=_("div",{class:"tip-arrow"},null,-1))]),_:1})]),_:1},8,["open"]))}}),wl={key:0},kl={key:0},xl={class:"text-caption ml-1"},$l={key:1},Cl=T({__name:"VolumeBtn",props:{volumeSize:{default:"150px"},responsiveVolumeSize:{type:Boolean,default:!0},isVisible:{type:Boolean,default:!0},color:{default:""}},setup(a){const l=a,i=Q(!1),r=Q(t.activePlayer?Math.round(t.activePlayer.group_members.length>0?t.activePlayer.group_volume:t.activePlayer.volume_level||0):0),d=L(()=>{if(!t.activePlayer)return ft;if(t.activePlayer.volume_muted)return ga;const o=r.value;return o===0?Pa:o<50?wa:ft});return(o,c)=>l.isVisible&&e(t).activePlayer?(s(),p("div",wl,[u(ot,{modelValue:i.value,"onUpdate:modelValue":c[2]||(c[2]=y=>i.value=y),class:"volume-control-dialog","close-on-content-click":!1,location:"top",scrim:o.$vuetify.theme.current.dark?"rgba(0,0,0,.75)":"rgba(0,0,0,.85)"},{activator:n(({props:y})=>[e(ae)("bp6")||!a.responsiveVolumeSize?(s(),p("div",kl,[u(nt,{style:"margin-right: 0px; margin-left: 0px;",width:a.volumeSize,"is-powered":e(t).activePlayer?.powered!=!1,disabled:!e(t).activePlayer?.available||e(t).activePlayer?.powered==!1||!e(t).activePlayer?.supported_features.includes(e(_e).VOLUME_SET),"model-value":e(t).activePlayer.group_members.length>0?Math.round(e(t).activePlayer?.group_volume||0):Math.round(e(t).activePlayer?.volume_level||0),"allow-wheel":!0,"onUpdate:modelValue":c[0]||(c[0]=w=>e(t).activePlayer.group_members.length>0?e(V).playerCommandGroupVolume(e(t).activePlayer?.player_id||"",w):e(V).playerCommandVolumeSet(e(t).activePlayer?.player_id||"",w)),"onUpdate:localValue":c[1]||(c[1]=w=>r.value=w)},{prepend:n(()=>[u(he,q({variant:"icon",size:"48",ripple:!1},{...y}),{default:n(()=>[(s(),h(be(d.value),{color:l.color?a.color:"",size:18},null,8,["color"])),_("div",xl,I(Math.round(r.value)),1)]),_:1},16)]),_:2},1032,["width","is-powered","disabled","model-value"])])):(s(),p("div",$l,[u(he,q({...y},{size:"48",variant:"icon"}),{default:n(()=>[(s(),h(be(d.value),{color:l.color?a.color:"",size:24},null,8,["color"])),_("div",{class:"text-caption",style:ne({color:l.color?a.color:""})},I(Math.round(r.value)),5)]),_:1},16)]))]),default:n(()=>[u(Ue,{"min-width":300,style:{overflow:"hidden","padding-top":"20px","padding-bottom":"20px","padding-right":"20px"}},{default:n(()=>[e(t).activePlayer?(s(),h(bi,{key:0,player:e(t).activePlayer,"show-sub-players":!0,"show-sync-controls":!1,"show-heading-row":!0,"show-volume-control":!0,"allow-wheel":!0,style:{"margin-left":"18px"}},null,8,["player"])):k("",!0)]),_:1})]),_:1},8,["modelValue","scrim"])])):k("",!0)}}),Il=ie(Cl,[["__scopeId","data-v-a4673e3b"]]),kt=T({__name:"PlayerExtendedControls",props:{queue:{default:()=>({isVisible:!0,showQueueDialog:!1})},player:{default:()=>({isVisible:!0})},volume:{default:()=>({isVisible:!0,volumeSize:"150px",responsiveVolumeSize:!1})}},setup(a){return(l,i)=>(s(),p(G,null,[a.player&&a.player.isVisible?(s(),h(Ut,{key:0,color:a.player.color},null,8,["color"])):k("",!0),a.queue&&a.queue.isVisible?(s(),h(Nt,{key:1,color:a.player.color,style:{"padding-left":"15px","padding-right":"20px"}},null,8,["color"])):k("",!0),a.volume&&a.volume.isVisible?(s(),h(Il,{key:2,color:a.volume.color,"volume-size":a.volume.volumeSize,"responsive-volume-size":a.volume.responsiveVolumeSize},null,8,["color","volume-size","responsive-volume-size"])):k("",!0)],64))}});function Oe(a,l,i){if(a===void 0||l===void 0||i!==void 0&&i!==pe.PLAYING)return a;const r=l*1e3,d=Date.now(),c=Math.max(0,d-r)/1e3;return a+c}const Sl={style:{width:"auto",height:"24px"}},Vl={key:0,style:{width:"100%"}},Tl=["onClick"],Ll={key:0,class:"time-text-row"},Ql={class:"text-caption time-text-right"},Ml=T({__name:"PlayerTimeline",props:{showLabels:{type:Boolean,default:!1},color:{default:void 0}},setup(a){const{activeSource:l}=Ke(We(t,"activePlayer")),i=Q(!1),r=Q(!0),d=Q(!1),o=Q(0),c=Q(0),y=Q(0);let w=null;const M=(z=500)=>{w||(w=setInterval(()=>y.value=Date.now(),z))},A=()=>{w&&(clearInterval(w),w=null)};Vt(()=>{A()});const S=L(()=>{if(l.value){if(t.activePlayer?.powered===!1)return!1;const b=!!t.activePlayer?.current_media?.duration;if(t.activePlayer?.current_media?.media_type==E.RADIO||t.activePlayer?.current_media?.duration==null)return!1;if(l.value.can_seek&&b)return!0}return!1}),f=L(()=>{if(o.value!=null){if(i.value&&t.activePlayer?.current_media?.duration){const z=t.activePlayer.current_media.duration-o.value;return`-${Le(z)}`}return Le(o.value)}return"0:00"}),R=L(()=>{const z=t.activePlayer?.current_media?.duration;return!z||t.activePlayer?.current_media?.media_type==E.RADIO?"":Le(z)}),O=L(()=>{y.value;const z=t.activePlayer?.playback_state==="playing",b=!!(t.activePlayerQueue&&t.activePlayerQueue.active),x=t.activePlayer?.current_media?.elapsed_time!=null;if(z&&(b||x)?M():A(),d.value)return c.value=o.value,o.value;const $=t.activePlayerQueue;return $?.elapsed_time!=null&&$?.elapsed_time_last_updated!=null?Oe($.elapsed_time,$.elapsed_time_last_updated,t.activePlayer?.playback_state)??0:t.activePlayer?.current_media?.elapsed_time!=null&&t.activePlayer?.current_media?.elapsed_time_last_updated!=null?Oe(t.activePlayer.current_media.elapsed_time,t.activePlayer.current_media.elapsed_time_last_updated,t.activePlayer?.playback_state)??0:t.activePlayer?.elapsed_time!=null&&t.activePlayer?.elapsed_time_last_updated!=null?Oe(t.activePlayer.elapsed_time,t.activePlayer.elapsed_time_last_updated,t.activePlayer?.playback_state)??0:0}),te=L(()=>{const z={};return t.curQueueItem?.media_item?.metadata?.chapters&&t.curQueueItem.media_item.metadata.chapters.forEach(b=>{z[b.start]=b.name}),z});ee(O,z=>{d.value||(o.value=z)});const j=function(){d.value=!0},ye=()=>{d.value=!1,!d.value&&t.activePlayer&&V.playerCommandSeek(t.activePlayer.player_id,Math.round(c.value))},ce=function(z){if(t.curQueueItem?.media_item?.metadata?.chapters){for(const b of t.curQueueItem.media_item.metadata.chapters)if(b.start==z){V.playMedia(t.curQueueItem.media_item.uri,void 0,void 0,b.position.toString());return}}};return(z,b)=>(s(),p("div",Sl,[e(t).activePlayer?(s(),p("div",Vl,[u(Za,{modelValue:o.value,"onUpdate:modelValue":b[0]||(b[0]=x=>o.value=x),disabled:!S.value,style:{width:"100%"},min:0,max:e(t).activePlayer?.current_media?.duration,"hide-details":"","track-size":4,"thumb-size":r.value?0:10,"show-ticks":te.value?"always":!1,ticks:te.value,"tick-size":"4",color:a.color,onTouchstart:b[1]||(b[1]=x=>r.value=!1),onTouchend:b[2]||(b[2]=x=>r.value=!0),onMouseenter:b[3]||(b[3]=x=>r.value=!1),onMouseleave:b[4]||(b[4]=x=>r.value=!0),onStart:j,onEnd:ye},{"tick-label":n(({tick:x})=>[a.showLabels&&!r.value&&Object.values(te.value).length<6?(s(),p("a",{key:0,class:"text-caption",onClick:$=>ce(x.value)},I(x.label),9,Tl)):k("",!0)]),_:1},8,["modelValue","disabled","max","thumb-size","show-ticks","ticks","color"]),a.showLabels?(s(),p("div",Ll,[_("div",{class:"text-caption time-text-left",onClick:b[5]||(b[5]=x=>i.value?i.value=!1:i.value=!0)},I(f.value),1),_("div",Ql,I(R.value),1)])):k("",!0)])):k("",!0)]))}}),Ht=ie(Ml,[["__scopeId","data-v-a2c59ecc"]]),Al={class:"lyrics-container"},El={key:0,class:"lyrics-loading"},Dl={key:1,class:"lyrics-empty"},Bl={key:2,class:"lyrics-intro"},Ol={class:"song-title"},Fl={class:"artist-name"},ql={class:"lyrics-coming-soon"},Rl=T({__name:"LyricsViewer",props:{mediaItem:{default:void 0},position:{default:void 0},duration:{default:void 0},streamDetails:{default:void 0},textColor:{default:"#FFFFFF"},debugMode:{type:Boolean,default:!1},lyrics:{default:void 0},lrcLyrics:{default:void 0}},setup(a){Tt(P=>({v275a5ede:P.textColor}));const l=a,i=(P,C=!0)=>{if(C&&!l.debugMode)return;(C?console.debug:console.log)(`[lyricSynch] ${P}`)},r=Q([]),d=Q(!1),o=Q(-1),c=Q(null),y=Q(!1),w=Q(0),M=Q(0),A=L(()=>{if(!O.value||!r.value.length)return!1;const P=r.value[0].time,C=l.position||0;return o.value===-1&&C<P}),S=L(()=>{if(!l.mediaItem)return"";if("media_type"in l.mediaItem&&l.mediaItem.media_type==="track"){const P=l.mediaItem;if(P.artists?.length)return P.artists.map(C=>C.name).join(", ")}return"media_type"in l.mediaItem&&l.mediaItem.media_type==="artist"?l.mediaItem.name:""}),f=()=>l.lyrics??l.mediaItem?.metadata?.lyrics??null,R=()=>l.lrcLyrics??l.mediaItem?.metadata?.lrc_lyrics??null;L(()=>{const P=f(),C=R();return!!P&&P.trim().length>0||!!C&&C.trim().length>0});const O=L(()=>{if(r.value.some(D=>D.time>0))return!0;const P=R(),C=f();return!!(P&&P.includes("[")||C&&/\[\d+:\d+[.:]?\d*\]/.test(C))}),te=P=>{const C=P.match(/\[(\d+):(\d+)([.:]\d+)?\](.*)/);if(C){const D=parseInt(C[1]);let N=parseInt(C[2]),se=0;if(C[3]){const le=C[3].replace(/[.:]/,".");se=Math.round(parseFloat(le)*1e3)}return{time:(D*60*1e3+N*1e3+se)/1e3,text:C[4].trim()||" "}}return{time:0,text:P.trim()||" "}},j=()=>{d.value=!0;try{const P=R()||"",C=f()||"";let D="",N=!1;if(P?(D=P,N=!0):C&&/\[\d+:\d+[.:]?\d*\]/.test(C)?(D=C,N=!0):C&&(D=C,N=!1),N){const se=D.split(`
`).filter(H=>H.trim());r.value=se.map(H=>te(H)).filter(H=>H.text.trim()).sort((H,X)=>H.time-X.time),i(`Loaded ${r.value.length} synchronized lyrics lines`,!1)}else if(D){const se=D.split(`
`).filter(H=>H.trim());r.value=se.map(H=>({time:0,text:H.trim()})).filter(H=>H.text),i(`Loaded ${r.value.length} plain text lyrics lines`,!1)}else r.value=[]}catch(P){i(`Error processing lyrics: ${P}`,!1),r.value=[]}finally{d.value=!1}},ye=P=>{const C=P;i(`Calculating look-ahead at ${P.toFixed(3)}s`);let D=-1,N=-1;for(let ve=0;ve<r.value.length;ve++)if(r.value[ve].time<=C)D=ve;else{N=ve;break}if(i(`Current lyric index: ${D}, Next lyric index: ${N}`),N===0){const me=r.value[0].time-C;if(i(`Pre-lyrics intro: ${me.toFixed(2)}s until first lyric`),me>5){i("Long intro - using fixed look-ahead: 0.3s"),w.value=.3;return}else if(me>2){const Se=Math.min(1,me*.15);i(`Medium intro - calculated look-ahead: ${Se.toFixed(2)}s`),w.value=Se;return}i("Short intro - using standard calculation")}if(N===-1||D===-1){i("Cannot determine appropriate look-ahead, using default: 0.3s"),w.value=.3;return}const se=r.value[D].time,H=r.value[N].time,X=H-se,le=w.value;i(`Gap analysis:
    - Current lyric time: ${se.toFixed(3)}s
    - Next lyric time: ${H.toFixed(3)}s
    - Gap between lyrics: ${X.toFixed(3)}s
    - Previous look-ahead: ${le.toFixed(3)}s`);let de;X<.5?(de=.3,i(`Very rapid lyrics detected (${X.toFixed(2)}s gap) - using 30% look-ahead`)):X<.8?(de=.1,i(`Fast lyrics detected (${X.toFixed(2)}s gap) - using 10% look-ahead`)):X<1.5?(de=.2,i(`Medium lyrics detected (${X.toFixed(2)}s gap) - using 20% look-ahead`)):X<3?(de=.3,i(`Slower lyrics detected (${X.toFixed(2)}s gap) - using 30% look-ahead`)):X>10?(de=.02,i(`Very slow lyrics detected (${X.toFixed(2)}s gap) - using 2% look-ahead`)):(de=.4,i(`Slow lyrics detected (${X.toFixed(2)}s gap) - using 40% look-ahead`));const Ce=Math.min(1.5,X*de);i(`Target look-ahead: ${Ce.toFixed(3)}s`);const Me=Math.abs(Ce-le),Ie=Math.min(.8,.3+Me*.5),we=le*(1-Ie)+Ce*Ie;i(`Smoothed look-ahead: ${we.toFixed(3)}s (adaptation rate: ${(Ie*100).toFixed(0)}%)`),Math.abs(we-le)>.3&&i(`Look-ahead adjusted: ${le.toFixed(2)}s â†’ ${we.toFixed(2)}s`,!1),w.value=we},ce=P=>P===void 0||!r.value.length||!O.value||y.value,z=P=>{const C=Math.round((P+w.value)*1e3);let D=-1;for(let N=0;N<r.value.length&&Math.round(r.value[N].time*1e3)<=C;N++)D=N;return D},b=(P,C)=>{P<0||P===o.value||(i(`Lyric activated: "${r.value[P].text}"`),i(`Activating lyric at ${C.toFixed(2)}s (adjusted: ${(C+w.value).toFixed(2)}s):
    - Index: ${P}
    - Lyric time: ${r.value[P].time.toFixed(2)}s`),i(`Transition details:
    - Raw position: ${C.toFixed(3)}s
    - Dynamic look-ahead: ${w.value.toFixed(3)}s
    - Adjusted position: ${(C+w.value).toFixed(3)}s`),P>0&&x(P,C),M.value=C,o.value=P,Ne(()=>$()))},x=(P,C)=>{const D=C-M.value,N=r.value[P].time-r.value[P-1].time;i(`Timing analysis:
    - Expected gap: ${N.toFixed(3)}s
    - Actual gap: ${D.toFixed(3)}s
    - Difference: ${(D-N).toFixed(3)}s`)},$=()=>{const P=document.querySelector(".lyrics-line.active"),C=c.value;P&&C&&P.scrollIntoView({behavior:"smooth",block:"center"})};return ee([()=>l.mediaItem?.item_id,()=>l.lyrics,()=>l.lrcLyrics],()=>{j()},{immediate:!0}),ee(()=>l.position,P=>{if(ce(P))return;const C=P??0;ye(C);const D=z(C);D!==o.value&&b(D,C)}),ge(()=>{const P=c.value;P&&P.addEventListener("scroll",()=>{y.value=!0,setTimeout(()=>{y.value=!1},8e3)},{passive:!0})}),(P,C)=>(s(),p("div",Al,[d.value?(s(),p("div",El,[u(ei,{indeterminate:"",color:a.textColor},null,8,["color"]),_("div",null,I(e(Z)("loading_lyrics")),1)])):r.value.length?A.value&&O.value?(s(),p("div",Bl,[_("div",Ol,I(l.mediaItem?.name),1),_("div",Fl,I(S.value),1),_("div",ql,I(e(Z)("lyrics_will_appear_soon")),1)])):(s(),p("div",{key:3,ref_key:"lyricsContainer",ref:c,class:Y(["lyrics-scroll-container",{"static-lyrics":!O.value}])},[(s(!0),p(G,null,ue(r.value,(D,N)=>(s(),p("div",{key:N,class:Y(["lyrics-line",{active:o.value===N||!O.value}])},I(D.text),3))),128))],2)):(s(),p("div",Dl,I(e(Z)("no_lyrics_available")),1))]))}}),zl=ie(Rl,[["__scopeId","data-v-1a18eb83"]]),Nl=["onClick"],Ul={class:"main"},Hl={key:0,class:"main-media-details"},Wl={key:0,class:"main-media-details-image"},jl={key:1,class:"icon-thumb-large"},Kl={class:"main-media-details-track-info"},Gl={key:8,style:{margin:"auto","padding-top":"20px"}},Yl={key:1,class:"main-queue-items"},Xl={class:"queue-items-scroll-box"},Jl={class:"media-thumb listitem-media-thumb"},Zl={class:"title-row"},es={class:"d-flex"},ts={style:{"white-space":"nowrap"},class:"pr-1"},as={key:0},is={key:0,style:{"margin-left":"50px"}},ls={key:0,class:"text-caption"},ss={key:1,class:"lyrics-wrapper"},rs={key:2,class:"main-queue-items"},os={class:"main-media-details-image main-media-details-image-alt"},ns={key:1,class:"icon-thumb-large"},us={class:"player-bottom"},cs={class:"row",style:{"margin-left":"5%","margin-right":"5%"}},ds={class:"media-controls"},ms={key:0,class:"row",style:{"margin-left":"5%","margin-right":"5%"}},ps={key:1,class:"row",style:{height:"70px",display:"flex","justify-content":"center","align-items":"center","padding-bottom":"15px","padding-top":"15px"}},ys=T({__name:"PlayerFullscreen",props:{colorPalette:{}},setup(a){const{name:l}=At(),i=a,r=new st,d=Q(-1),o=new st,c=Q([]),y=Q(0),w=Q(!1),M=Q(0);let A=null;const S=(v=250)=>{A||(A=setInterval(()=>M.value=Date.now(),v))},f=()=>{A&&(clearInterval(A),A=null)},R=L(()=>{M.value;const v=t.activePlayer?.playback_state===pe.PLAYING,m=t.activePlayerQueue;return v&&m?.active?S():f(),m?.elapsed_time!=null&&m?.elapsed_time_last_updated!=null?Oe(m.elapsed_time,m.elapsed_time_last_updated,t.activePlayer?.playback_state)??0:0}),O=L(()=>t.activePlayerQueue?c.value.slice(t.activePlayerQueue.current_index):[]),te=L(()=>t.activePlayerQueue?c.value.slice(0,t.activePlayerQueue.current_index).reverse():[]),j=Q({plain:null,synced:null}),ye=L(()=>{const v=j.value.plain,m=j.value.synced;return!!v&&v.trim().length>0||!!m&&m.trim().length>0}),ce=async()=>{if(j.value={plain:null,synced:null},!t.showFullscreenPlayer)return;const v=t.curQueueItem?.media_item;if(!v||v.media_type!==E.TRACK)return;const m=v,g=m.metadata?.lyrics?.trim()||null,F=m.metadata?.lrc_lyrics?.trim()||null;if(g||F){j.value={plain:g,synced:F};return}try{const[B,J]=await V.getTrackLyrics(m);j.value={plain:B,synced:J},(B||J)&&(m.metadata={...m.metadata,...B&&{lyrics:B},...J&&{lrc_lyrics:J}})}catch(B){console.error("Failed to fetch track lyrics:",B)}};ee(()=>t.curQueueItem?.media_item?.item_id,ce,{immediate:!0}),ee(()=>t.showFullscreenPlayer,v=>{v&&ce()});const z=L(()=>{switch(l.value){case"xs":return"1.2em";case"sm":return"1.6em";case"md":return"2em";case"lg":return t.showQueueItems?"1.5em":"2.5em";case"xl":return t.showQueueItems?"1.6em":"3em";case"xxl":return t.showQueueItems?"1.7em":"3.2em";default:return"1.0em."}}),b=L(()=>{switch(l.value){case"xs":return"1.0em";case"sm":return"1.2em";case"md":return"1.7em";case"lg":return t.showQueueItems?"1.0em":"1.6em";case"xl":return t.showQueueItems?"1.2em":"2em";case"xxl":return t.showQueueItems?"1.2em":"2em";default:return"1.0em."}}),x=L(()=>Fe.display.height.value>800),$=function(v){t.showFullscreenPlayer=!1,Xe.push({name:v.media_type,params:{itemId:v.item_id,provider:v.provider}})},P=function(v){if(!v)return null;const m=[E.ALBUM,E.ARTIST,E.TRACK,E.PLAYLIST,E.RADIO,E.PODCAST,E.AUDIOBOOK,E.PODCAST_EPISODE];let g=v.match(/^([^:]+):\/\/([^/]+)\/(.+)$/);if(g){const[,F,B,J]=g;if(m.includes(B))return{provider:F,mediaType:B,itemId:J}}if(g=v.match(/^([^:]+):([^:]+):(.+)$/),g){const[,F,B,J]=g;if(m.includes(B))return{provider:F,mediaType:B,itemId:J}}return null},C=function(v,m){const g=P(m);g&&V.getProvider(g.provider)?(t.showFullscreenPlayer=!1,Xe.push({name:g.mediaType,params:{itemId:g.itemId,provider:g.provider}})):(t.globalSearchTerm=v,Xe.push({name:"search"}),t.showFullscreenPlayer=!1)},D=function(){const v=t.activePlayer?.current_media;if(!v)return;const m=v.artist?`${v.artist} - ${v.title}`:v.title||"";C(m,v.uri)},N=function(){const v=t.activePlayer?.current_media;if(!v?.album)return;const m=v.artist?`${v.artist} - ${v.album}`:v.title||"";C(m,v.uri)},se=function(){const v=t.activePlayer?.current_media;v?.artist&&C(v.artist,v.uri)},H=function(v,m){const g=c.value.indexOf(m),F=[{label:"play_now",labelArgs:[],action:()=>{le(m,"play_now")},icon:"mdi-play-circle-outline",disabled:g===t.activePlayerQueue?.current_index||g===t.activePlayerQueue?.index_in_buffer},{label:"play_next",labelArgs:[],action:()=>{le(m,"move_next")},icon:"mdi-skip-next-circle-outline",disabled:g<=(t.activePlayerQueue?.index_in_buffer||0)},{label:"queue_move_up",labelArgs:[],action:()=>{le(m,"up")},icon:"mdi-arrow-up",disabled:g<=(t.activePlayerQueue?.index_in_buffer||0)},{label:"queue_move_down",labelArgs:[],action:()=>{le(m,"down")},icon:"mdi-arrow-down",disabled:g<=(t.activePlayerQueue?.index_in_buffer||0)},{label:"queue_delete",labelArgs:[],action:()=>{le(m,"delete")},icon:"mdi-delete",disabled:g<=(t.activePlayerQueue?.index_in_buffer||0)}];m?.media_item?.media_type==E.TRACK&&F.push({label:"show_info",labelArgs:[],action:()=>{$(m.media_item)},icon:"mdi-information-outline",disabled:!1}),ke.emit("contextmenu",{items:F,posX:v.clientX,posY:v.clientY})},X=function(v){t.activePlayer&&ke.emit("contextmenu",{items:gi(t.activePlayer,t.activePlayerQueue),posX:v.clientX,posY:v.clientY})},le=function(v,m){!v||!t.activePlayerQueue||(m=="play_now"?V.queueCommandPlayIndex(t.activePlayerQueue?.queue_id,v.queue_item_id):m=="move_next"?V.queueCommandMoveNext(t.activePlayerQueue?.queue_id,v.queue_item_id):m=="up"?V.queueCommandMoveUp(t.activePlayerQueue?.queue_id,v.queue_item_id):m=="down"?V.queueCommandMoveDown(t.activePlayerQueue?.queue_id,v.queue_item_id):m=="delete"&&V.queueCommandDelete(t.activePlayerQueue?.queue_id,v.queue_item_id))},de=async function(){w.value=!0,c.value=[],await vt(100),w.value=!1},Ce=async function({done:v}){if(!t.activePlayerQueue||t.activePlayerQueue.items==0){v("empty");return}if(c.value.length>=t.activePlayerQueue?.items){v("empty");return}const m=c.value.length,g=(t.activePlayerQueue.current_index||0)+50,F=await V.getPlayerQueueItems(t.activePlayerQueue.queue_id,g,m);c.value.push(...F),F.length<50?v("empty"):v("ok")};ge(()=>{const v=V.subscribe(Kt.QUEUE_ITEMS_UPDATED,m=>{m.object_id==t.activePlayerQueue?.queue_id&&(m.data,de())});ze(v)});const Me=v=>{v.key==="Escape"&&t.showFullscreenPlayer&&!t.dialogActive&&(t.showFullscreenPlayer=!1)};ge(()=>{window.addEventListener("keydown",Me),ze(()=>{window.removeEventListener("keydown",Me),f()})});const Ie=async function(v){if(!t.curQueueItem?.media_item)return;if(!t.curQueueItem.media_item.favorite){V.toggleFavorite(t.curQueueItem.media_item);return}let m=t.curQueueItem.media_item;(m.provider!="library"||!("provider_mappings"in m))&&[E.ALBUM,E.ARTIST,E.AUDIOBOOK,E.PLAYLIST,E.PODCAST,E.RADIO,E.TRACK].includes(m.media_type)&&(m=await V.getLibraryItem(m.media_type,m.item_id,m.provider)||m);const g=[];"favorite"in m&&m.favorite&&m.provider=="library"&&[E.ALBUM,E.ARTIST,E.AUDIOBOOK,E.PLAYLIST,E.PODCAST,E.RADIO,E.TRACK].includes(m.media_type)&&g.push({label:"favorites_remove",labelArgs:[],action:()=>{V.removeItemFromFavorites(m.media_type,m.item_id),m.favorite=!1,t.curQueueItem.media_item.favorite=!1},icon:"mdi-heart"}),[E.ALBUM,E.ARTIST,E.AUDIOBOOK,E.PLAYLIST,E.PODCAST,E.RADIO,E.TRACK].includes(m.media_type)&&g.push({label:"add_playlist",labelArgs:[],action:()=>{ke.emit("playlistdialog",{items:[t.curQueueItem.media_item]})},icon:"mdi-plus-circle-outline"}),ke.emit("contextmenu",{items:g,posX:v.clientX,posY:v.clientY})},we=function(){w.value=!0,vt(100).then(()=>{w.value=!1})},ve=function(v,m){V.playMedia(v.uri,Gt.PLAY,void 0,m.position.toString())};ee(()=>t.activePlayerId,v=>{de()},{immediate:!0});const me=Q(void 0),Se=Q(void 0);return ka(()=>{const v=De("white"),m=De("black"),g=5,F=.05,B=Fe.theme.current.value.dark?i.colorPalette.darkColor||"#000":i.colorPalette.lightColor||"#fff";let J=De(B);const ct=v.contrast(J),dt=m.contrast(J),mt=ct>=dt;let Ge=mt?v:m,Ye=Math.max(ct,dt);if(Ye<g){let pt=F;for(;Ye<g&&pt<=.5;)mt?J=J.darken(F):J=J.lighten(F),Ye=De(Ge).contrast(J),pt+=F}document.documentElement.style.setProperty("--text-color",Ge.hex()),me.value=Ge.hex(),Se.value=J.hex()}),(v,m)=>(s(),h(Mt,{modelValue:e(t).showFullscreenPlayer,"onUpdate:modelValue":m[8]||(m[8]=g=>e(t).showFullscreenPlayer=g),fullscreen:"",scrim:!1,transition:"dialog-bottom-transition","z-index":"9999",persistent:""},{default:n(()=>[u(Ue,{color:Se.value},{default:n(()=>[u(ti,{class:"v-toolbar-default",color:"transparent"},{prepend:n(()=>[u(he,{icon:"",onClick:m[0]||(m[0]=g=>e(t).showFullscreenPlayer=!1)},{default:n(()=>[u(oe,{icon:"mdi-chevron-down"})]),_:1})]),append:n(()=>[e(t).activePlayerQueue?.radio_source.length?(s(),h(ot,{key:0,scrim:""},{activator:n(({props:g})=>[u(he,q(g,{icon:""}),{default:n(()=>[u(oe,{color:"accent",icon:"mdi-radio-tower"})]),_:1},16)]),default:n(()=>[u(Ue,{title:e(Z)("queue_radio_enabled"),subtitle:e(Z)("queue_radio_based_on")},{text:n(()=>[(s(!0),p(G,null,ue(e(t).activePlayerQueue?.radio_source,g=>(s(),p("div",{key:g.uri},[_("a",{onClick:F=>$(g)},I(g.name),9,Nl)]))),128))]),_:1},8,["title","subtitle"])]),_:1})):k("",!0),x.value?k("",!0):(s(),h(Ut,{key:1})),u(he,{icon:"",onClick:Ee(X,["stop"])},{default:n(()=>[u(oe,{icon:"mdi-dots-vertical"})]),_:1})]),_:1}),_("div",Ul,[e(ae)("bp7")||!e(t).showQueueItems?(s(),p("div",Hl,[v.$vuetify.display.height>600?(s(),p("div",Wl,[e(t).activePlayer?.powered!=!1&&e(t).activePlayer?.current_media?.image_url?(s(),h(it,{key:0,style:{"max-width":"100%",width:"auto","border-radius":"4px"},src:e(qe)(e(t).activePlayer.current_media.image_url)},null,8,["src"])):(s(),p("div",jl,[u(oe,{size:"128",icon:e(t).activePlayer?.type==e(et).PLAYER&&e(t).activePlayer?.group_members.length?"mdi-speaker-multiple":e(t).activePlayer?.icon||"mdi-speaker"},null,8,["icon"])]))])):k("",!0),_("div",Kl,[e(t).activePlayer?.powered==!1?(s(),h(Be,{key:0,style:ne(`font-size: ${z.value};`)},{default:n(()=>[K(I(e(t).activePlayer?.name),1)]),_:1},8,["style"])):e(t).activePlayer?.current_media?.title?(s(),h(Be,{key:1,style:ne(`font-size: ${z.value};cursor:pointer;`),onClick:D},{default:n(()=>[u(fe,{sync:e(r)},{default:n(()=>[K(I(e(t).activePlayer.current_media.title),1)]),_:1},8,["sync"])]),_:1},8,["style"])):(s(),h(Be,{key:2,style:ne(`font-size: ${z.value};cursor:pointer;`),onClick:m[1]||(m[1]=g=>e(t).showPlayersMenu=!0)},{default:n(()=>[u(fe,{sync:e(r)},{default:n(()=>[K(I(e(t).activePlayer?.name||e(Z)("no_player")),1)]),_:1},8,["sync"])]),_:1},8,["style"])),e(t).activePlayer?.powered==!1?(s(),h(Ve,{key:3,class:"text-h6 text-md-h5 text-lg-h4"},{default:n(()=>[K(I(e(Z)("off")),1)]),_:1})):e(t).activePlayer?.current_media?.album?(s(),h(Ve,{key:4,style:ne(`font-size: ${b.value};cursor:pointer;`),onClick:N},{default:n(()=>[u(fe,{sync:e(r)},{default:n(()=>[K(I(e(t).activePlayer.current_media.album),1)]),_:1},8,["sync"])]),_:1},8,["style"])):k("",!0),e(t).activePlayer?.current_media?.artist?(s(),h(Ve,{key:5,style:ne(`font-size: ${b.value};cursor:pointer;`),onClick:se},{default:n(()=>[u(fe,{sync:e(r)},{default:n(()=>[K(I(e(t).activePlayer.current_media.artist),1)]),_:1},8,["sync"])]),_:1},8,["style"])):k("",!0),!e(t).activePlayerQueue&&e(t).activePlayer?.active_source?(s(),h(Ve,{key:6,class:"caption"},{default:n(()=>[K(I(e(Z)("external_source_active",[e(Ct)(e(t).activePlayer)])),1)]),_:1})):e(t).activePlayerQueue&&e(t).activePlayerQueue.items==0?(s(),h(Ve,{key:7,class:"caption"},{default:n(()=>[K(I(e(Z)("queue_empty")),1)]),_:1})):k("",!0),e(t).activePlayer?.powered!=!1&&e(t).curQueueItem?.streamdetails?(s(),p("div",Gl,[u(Qt)])):k("",!0)])])):k("",!0),e(t).showQueueItems&&e(t).activePlayerQueue?(s(),p("div",Yl,[u(ai,{modelValue:y.value,"onUpdate:modelValue":m[2]||(m[2]=g=>y.value=g),"hide-slider":"",density:"compact",onClick:we},{default:n(()=>[u(Ze,{value:0},{default:n(()=>[K(I(e(Z)("queue"))+" ",1),u(at,{color:"grey",content:(e(t).activePlayerQueue?.items||0)-(e(t).activePlayerQueue?.current_index||0),inline:""},null,8,["content"])]),_:1}),u(Ze,{value:1},{default:n(()=>[K(I(e(Z)("played"))+" ",1),u(at,{color:"grey",content:e(t).activePlayerQueue?.current_index,inline:""},null,8,["content"])]),_:1}),ye.value?(s(),h(Ze,{key:0,value:2},{default:n(()=>[K(I(e(Z)("lyrics")),1)]),_:1})):k("",!0)]),_:1},8,["modelValue"]),_("div",Xl,[!w.value&&y.value!==2?(s(),h(ii,{key:0,onLoad:Ce,"empty-text":"",height:"100%"},{default:n(()=>[u(li,{"item-height":70,"max-height":"90%",items:y.value==0?O.value:te.value},{default:n(({item:g,index:F})=>[u(Pi,{link:"","show-menu-btn":!0,disabled:!g.available,onClick:Ee(B=>H(B,g),["stop"]),onMenu:Ee(B=>H(B,g),["stop"]),onMouseenter:B=>d.value=F,onMouseleave:m[3]||(m[3]=B=>d.value=-1)},{prepend:n(()=>[_("div",Jl,[u(Lt,{size:"50",item:g},null,8,["item"])])]),title:n(()=>[_("div",Zl,[u(fe,{sync:F==0&&y.value==0?e(r):e(o),disabled:!(F==0&&y.value==0||d.value==F)},{default:n(()=>[_("span",{class:Y({"is-playing":g.queue_item_id===e(t).curQueueItem?.queue_item_id})},I(g.name),3)]),_:2},1032,["sync","disabled"])])]),subtitle:n(()=>[_("div",es,[_("span",ts,I(e(Le)(g.duration))+" | ",1),u(fe,{sync:F==0&&y.value==0?e(r):e(o),disabled:!(F==0&&y.value==0||d.value==F)},{default:n(()=>[g.media_item&&"album"in g.media_item&&g.media_item.album?(s(),p("span",as,I(g.media_item.album.name),1)):k("",!0)]),_:2},1032,["sync","disabled"])])]),append:n(()=>[g.queue_item_id===e(t).curQueueItem?.queue_item_id&&e(t).activePlayer?.playback_state!=e(pe).IDLE?(s(),h(Et,{key:0,"show-badge":e(ae)("bp4")},null,8,["show-badge"])):k("",!0),g.available?k("",!0):(s(),h(oe,{key:1},{default:n(()=>[...m[9]||(m[9]=[K("mdi-alert",-1)])]),_:1}))]),_:2},1032,["disabled","onClick","onMenu","onMouseenter"]),g.queue_item_id==e(t).curQueueItem?.queue_item_id&&g.media_item?.metadata?.chapters?.length?(s(),p("div",is,[(s(!0),p(G,null,ue(g.media_item.metadata?.chapters,B=>(s(),h(Qe,{key:B.position,onClick:Ee(J=>ve(g.media_item,B),["stop"])},{title:n(()=>[_("div",null,I(B.name),1)]),append:n(()=>[B.end?(s(),p("span",ls,I(e(Le)(B.end-B.start)),1)):k("",!0)]),_:2},1032,["onClick"]))),128))])):k("",!0)]),_:1},8,["items"])]),_:1})):k("",!0),y.value===2?(s(),p("div",ss,[u(zl,{"media-item":e(t).curQueueItem?.media_item,position:R.value,duration:e(t).curQueueItem?.duration,"stream-details":e(t).curQueueItem?.streamdetails,"text-color":me.value,lyrics:j.value.plain,"lrc-lyrics":j.value.synced},null,8,["media-item","position","duration","stream-details","text-color","lyrics","lrc-lyrics"])])):k("",!0)])])):k("",!0),!e(t).showQueueItems&&v.$vuetify.display.height<=600?(s(),p("div",rs,[_("div",os,[e(t).activePlayer?.current_media?.image_url?(s(),h(it,{key:0,style:{"max-width":"100%",width:"auto","border-radius":"4px"},src:e(qe)(e(t).activePlayer.current_media.image_url)},null,8,["src"])):(s(),p("div",ns,[u(oe,{size:"128",icon:e(t).activePlayer?.type==e(et).PLAYER&&e(t).activePlayer?.group_members.length?"mdi-speaker-multiple":e(t).activePlayer?.icon||"mdi-speaker"},null,8,["icon"])]))])])):k("",!0)]),_("div",us,[_("div",cs,[u(Ht,{"show-labels":!0,color:me.value},null,8,["color"])]),_("div",ds,[e(t).activePlayerQueue?(s(),h(Pe,{key:0,disabled:!e(t).curQueueItem?.media_item,icon:e(t).curQueueItem?.media_item?.favorite?"mdi-heart":"mdi-heart-outline",title:e(Z)("tooltip.favorite"),variant:"button",class:"media-controls-item","max-height":"30px",onClick:Ie},null,8,["disabled","icon","title"])):k("",!0),v.$vuetify.display.mdAndUp?(s(),h(zt,{key:1,"player-queue":e(t).activePlayerQueue,class:"media-controls-item","max-height":"30px"},null,8,["player-queue"])):k("",!0),u(Rt,{player:e(t).activePlayer,"player-queue":e(t).activePlayerQueue,class:"media-controls-item","max-height":"45px"},null,8,["player","player-queue"]),u(qt,{player:e(t).activePlayer,"player-queue":e(t).activePlayerQueue,class:"media-controls-item","max-height":"70px"},null,8,["player","player-queue"]),u(Ft,{player:e(t).activePlayer,"player-queue":e(t).activePlayerQueue,class:"media-controls-item","max-height":"45px"},null,8,["player","player-queue"]),v.$vuetify.display.mdAndUp?(s(),h(Ot,{key:2,"player-queue":e(t).activePlayerQueue,class:"media-controls-item","max-height":"35px"},null,8,["player-queue"])):k("",!0),e(t).activePlayerQueue?(s(),h(Nt,{key:3,class:"media-controls-item","max-height":"30px"})):k("",!0)]),e(t).activePlayer?(s(),p("div",ms,[u(nt,{width:"100%","is-powered":e(t).activePlayer?.powered!=!1,disabled:!e(t).activePlayer||!e(t).activePlayer?.available||e(t).activePlayer.powered==!1||!e(t).activePlayer.supported_features.includes(e(_e).VOLUME_SET),"model-value":Math.round(e(t).activePlayer.group_members.length>0?e(t).activePlayer.group_volume:e(t).activePlayer.volume_level||0),"prepend-icon":"mdi-volume-minus","append-icon":"mdi-volume-plus",color:me.value,"allow-wheel":!0,"onUpdate:modelValue":m[4]||(m[4]=g=>e(t).activePlayer.group_members.length>0?e(V).playerCommandGroupVolume(e(t).activePlayerId,g):e(V).playerCommandVolumeSet(e(t).activePlayerId,g)),"onClick:prepend":m[5]||(m[5]=g=>e(t).activePlayer.group_members.length>0?e(V).playerCommandGroupVolumeDown(e(t).activePlayerId):e(V).playerCommandVolumeDown(e(t).activePlayerId)),"onClick:append":m[6]||(m[6]=g=>e(t).activePlayer.group_members.length>0?e(V).playerCommandGroupVolumeUp(e(t).activePlayerId):e(V).playerCommandVolumeUp(e(t).activePlayerId))},null,8,["is-powered","disabled","model-value","color"])])):k("",!0),x.value?(s(),p("div",ps,[u(lt,{class:"responsive-icon-holder-btn",variant:"outlined",onClick:m[7]||(m[7]=g=>e(t).showPlayersMenu=!0)},{default:n(()=>[u(oe,{icon:e(t).activePlayer?.icon||"mdi-speaker"},null,8,["icon"]),K(" "+I(e(t).activePlayer?e(It)(e(t).activePlayer):""),1)]),_:1})])):k("",!0)])]),_:1},8,["color"])]),_:1},8,["modelValue"]))}}),vs=ie(ys,[["__scopeId","data-v-94753a98"]]),fs={key:0},hs={key:1,class:"icon-thumb"},_s={key:0},bs={key:0,class:"pl-4"},gs={key:0},Ps={class:"ma-line-clamp-1"},ws={class:"ma-line-clamp-1"},ks={key:0},xs={key:1},$s={key:2},Cs={key:2,class:"ma-line-clamp-1"},Is={key:3,class:"ma-line-clamp-1"},Ss={key:4},Vs=T({__name:"PlayerTrackDetails",props:{showOnlyArtist:{type:Boolean,default:!1},showQualityDetailsBtn:{type:Boolean,default:!0},colorPalette:{},primaryColor:{default:""}},setup(a){const l=new st,i=a,r=L(()=>t.activePlayerQueue?.current_item?.streamdetails);return(d,o)=>(s(),p(G,null,[u(Qe,{class:"player-track-details",style:{height:"auto",width:"100%",margin:"0px",padding:"0px"},lines:"two"},{prepend:n(()=>[_("div",{class:"media-thumb player-media-thumb",style:ne(`cursor: pointer;height: ${e(ae)({breakpoint:"phone"})?60:64}px; width: ${e(ae)({breakpoint:"phone"})?60:64}px; `),onClick:o[0]||(o[0]=c=>e(t).showFullscreenPlayer=!0)},[e(t).activePlayer?.powered!=!1&&e(t).activePlayer?.current_media?.image_url?(s(),p("div",fs,[u(it,{class:"media-thumb",style:{"border-radius":"4px"},size:"60",src:e(qe)(e(t).activePlayer.current_media.image_url)},null,8,["src"])])):(s(),p("div",hs,[u(oe,{size:"32",icon:e(t).activePlayer?.type==e(et).PLAYER&&e(t).activePlayer?.group_members.length?"mdi-speaker-multiple":e(t).activePlayer?.icon||"mdi-speaker"},null,8,["icon"])]))],4)]),title:n(()=>[_("div",{style:ne({cursor:"pointer",color:a.primaryColor}),class:"d-flex align-center"},[e(t).activePlayer&&e(t).activePlayer?.powered!=!1?(s(),p("div",_s,I(e(It)(e(t).activePlayer)),1)):e(t).activePlayer?.powered==!1?(s(),p("div",{key:1,onClick:o[1]||(o[1]=c=>e(t).showPlayersMenu=!0)},I(e(t).activePlayer?.name),1)):(s(),p("div",{key:2,onClick:o[2]||(o[2]=c=>e(t).showPlayersMenu=!0)},I(d.$t("no_player")),1)),e(t).activePlayer&&e(t).activePlayer?.powered!=!1&&e(t).activePlayer?.playback_state!=e(pe).IDLE?(s(),h(Et,{key:3,"show-badge":!1,"show-icon":!0,"icon-style":"margin-left: 12px; margin-bottom: 4px;"})):k("",!0)],4)]),append:n(()=>[r.value?.audio_format.content_type&&!e(ae)({breakpoint:"phone"})&&a.showQualityDetailsBtn?(s(),p("div",bs,[u(Qt)])):k("",!0)]),subtitle:n(()=>[_("div",{style:ne({cursor:"pointer",color:a.primaryColor}),onClick:o[3]||(o[3]=c=>e(t).showFullscreenPlayer=!0)},[e(t).activePlayer?.powered==!1?(s(),p("div",gs,I(d.$t("off")),1)):e(t).activePlayer?.current_media?.title?(s(),p(G,{key:1},[_("div",Ps,[u(fe,{sync:e(l)},{default:n(()=>[K(I(e(t).activePlayer.current_media.title),1)]),_:1},8,["sync"])]),_("div",ws,[u(fe,{sync:e(l)},{default:n(()=>[e(t).activePlayer?.current_media?.artist&&e(t).activePlayer?.current_media?.album&&!i.showOnlyArtist?(s(),p("span",ks,I(e(t).activePlayer?.current_media?.artist)+" â€¢ "+I(e(t).activePlayer?.current_media?.album),1)):e(t).activePlayer?.current_media?.artist?(s(),p("span",xs,I(e(t).activePlayer?.current_media?.artist),1)):e(t).activePlayer?.current_media?.album?(s(),p("span",$s,I(e(t).activePlayer?.current_media?.album),1)):k("",!0)]),_:1},8,["sync"])])],64)):e(t).activePlayer&&!e(t).activePlayerQueue&&e(t).activePlayer?.active_source?(s(),p("div",Cs,I(d.$t("external_source_active",[e(Ct)(e(t).activePlayer)])),1)):e(t).activePlayerQueue&&e(t).activePlayerQueue.items==0?(s(),p("div",Is,I(d.$t("queue_empty")),1)):e(t).activePlayer?(s(),p("div",Ss,I(e(t).activePlayer?.name),1)):k("",!0)],4)]),_:1}),u(vs,{"show-fullscreen":e(t).showFullscreenPlayer,"color-palette":a.colorPalette},null,8,["show-fullscreen","color-palette"])],64))}}),xt=ie(Vs,[["__scopeId","data-v-5a848776"]]),Ts=["data-floating"],Ls={class:"mediacontrols"},Qs={class:"mediacontrols-left"},Ms={class:"mediacontrols-bottom-center"},As={class:"mediacontrols-bottom-right"},Es={key:1,class:"mediacontrols-mobile-container"},Ds=["data-floating"],Bs={class:"mediacontrols","data-mobile":!0},Os={class:"mediacontrols-left"},Fs={class:"mediacontrols-bottom-right"},qs={key:0,class:"volume-slider"},Rs=T({__name:"Player",props:{useFloatingPlayer:{type:Boolean}},setup(a){Tt(o=>({v45d54d6a:d.value}));const{mobile:l}=At({mobileBreakpoint:576}),i=Q({0:"",1:"",2:"",3:"",4:"",5:"",lightColor:"",darkColor:""}),r=new Image;r.src=Fe.theme.current.value.dark?Ka:Ga,r.crossOrigin="Anonymous",r.addEventListener("load",function(){i.value=Yt(r)});const d=L(()=>Fe.theme.current.value.dark?i.value&&i.value.darkColor?i.value.darkColor:"#CCCCCC26":i.value&&i.value.lightColor?i.value.lightColor:"#CCCCCC26");return ee(()=>t.activePlayer?.current_media?.image_url,()=>{t.activePlayer?.current_media?.image_url?r.src=qe(t.activePlayer.current_media.image_url):r.src=""}),(o,c)=>e(l)?(s(),p("div",Es,[_("div",{class:"mediacontrols-bg","data-floating":a.useFloatingPlayer},null,8,Ds),_("div",Bs,[_("div",Os,[u(xt,{"show-quality-details-btn":!1,"show-only-artist":!0,"color-palette":i.value,"primary-color":o.$vuetify.theme.current.dark?"#fff":"#000"},null,8,["color-palette","primary-color"])]),_("div",Fs,[_("div",null,[u(kt,{queue:{isVisible:!1,color:o.$vuetify.theme.current.dark?"#fff":"#000"},player:{isVisible:!0,color:o.$vuetify.theme.current.dark?"#fff":"#000"},volume:{isVisible:!1,color:o.$vuetify.theme.current.dark?"#fff":"#000"}},null,8,["queue","player","volume"]),u(wt,{style:{"padding-right":"5px"},"visible-components":{repeat:{isVisible:!1},shuffle:{isVisible:!1},play:{isVisible:!0,icon:{staticWidth:"40px",staticHeight:"40px",color:o.$vuetify.theme.current.dark?"#fff":"#000"}},previous:{isVisible:!1},next:{isVisible:!1}}},null,8,["visible-components"])])])]),e(t).activePlayer?(s(),p("div",qs,[u(nt,{width:"100%",color:"secondary","is-powered":e(t).activePlayer?.powered!=!1,disabled:!e(t).activePlayer||!e(t).activePlayer?.available||e(t).activePlayer.powered==!1||!e(t).activePlayer.supported_features.includes(e(_e).VOLUME_SET),"model-value":Math.round(e(t).activePlayer.group_members.length>0?e(t).activePlayer.group_volume:e(t).activePlayer.volume_level||0),"prepend-icon":"mdi-volume-minus","append-icon":"mdi-volume-plus","onUpdate:modelValue":c[0]||(c[0]=y=>e(t).activePlayer.group_members.length>0?e(V).playerCommandGroupVolume(e(t).activePlayerId,y):e(V).playerCommandVolumeSet(e(t).activePlayerId,y)),"onClick:prepend":c[1]||(c[1]=y=>e(t).activePlayer.group_members.length>0?e(V).playerCommandGroupVolumeDown(e(t).activePlayerId):e(V).playerCommandVolumeDown(e(t).activePlayerId)),"onClick:append":c[2]||(c[2]=y=>e(t).activePlayer.group_members.length>0?e(V).playerCommandGroupVolumeUp(e(t).activePlayerId):e(V).playerCommandVolumeUp(e(t).activePlayerId))},null,8,["is-powered","disabled","model-value"])])):k("",!0)])):(s(),p(G,{key:0},[_("div",{class:"mediacontrols-bg","data-floating":a.useFloatingPlayer},null,8,Ts),_("div",Ls,[_("div",Qs,[u(xt,{"show-quality-details-btn":!!e(ae)("bp8"),"show-only-artist":!e(ae)("bp7"),"color-palette":i.value,"primary-color":o.$vuetify.theme.current.dark?"#fff":"#000"},null,8,["show-quality-details-btn","show-only-artist","color-palette","primary-color"])]),_("div",Ms,[u(wt,{"visible-components":{repeat:{isVisible:e(ae)("bp3")},shuffle:{isVisible:e(ae)("bp3")},play:{isVisible:!0,icon:{staticWidth:"48px",staticHeight:"48px"}},previous:{isVisible:e(ae)("bp3")},next:{isVisible:e(ae)("bp3")}}},null,8,["visible-components"]),e(ae)("bp6")?(s(),h(Ht,{key:0,"is-progress-bar":!1,disabled:!e(t).activePlayerQueue?.active||e(t).activePlayerQueue?.current_item?.media_item?.media_type!==e(E).TRACK},null,8,["disabled"])):k("",!0)]),_("div",As,[_("div",null,[u(kt,{queue:{isVisible:e(ae)("bp3"),color:o.$vuetify.theme.current.dark?"#fff":"#000"},player:{isVisible:!0,color:o.$vuetify.theme.current.dark?"#fff":"#000"},volume:{isVisible:e(t).activePlayer!=null,color:o.$vuetify.theme.current.dark?"#fff":"#000"}},null,8,["queue","player","volume"])])])])],64))}}),zs=ie(Rs,[["__scopeId","data-v-5ee38b8e"]]),Ns={class:"menuButton"},Us={class:"menuButton"},Hs=T({__name:"BottomNavigation",props:{height:{}},setup(a){const l=Bt(),i=Q(!1);return(r,d)=>(s(),h(si,{height:a.height,"bg-color":"default",grow:"",role:"navigation"},{default:n(()=>[(s(!0),p(G,null,ue(e(l).filter(o=>!o.isLibraryNode),o=>(s(),h(lt,{key:o.label,to:o.path,"aria-label":r.$t(o.label),tabindex:"0",variant:"text","active-color":"fg","base-color":"grey"},{default:n(()=>[(s(),h(be(o.icon),{class:"w-6 h-6"})),_("span",Ns,I(r.$t(o.label)),1)]),_:2},1032,["to","aria-label"]))),128)),u(ot,null,{activator:n(({props:o})=>[u(lt,q(o,{"aria-haspopup":"true","aria-expanded":i.value.toString(),"aria-label":"Open library menu","base-color":"grey"}),{default:n(()=>[u(e(xa),{class:"w-6 h-6"}),_("span",Us,I(r.$t("library")),1)]),_:1},16,["aria-expanded"])]),default:n(()=>[u(He,null,{default:n(()=>[(s(!0),p(G,null,ue(e(l).filter(o=>o.isLibraryNode),o=>(s(),h(Qe,{key:o.label,title:r.$t(o.label),to:o.path},{prepend:n(()=>[(s(),h(be(o.icon),{class:"w-5 h-5 mr-3"}))]),_:2},1032,["title","to"]))),128))]),_:1})]),_:1})]),_:1},8,["height"]))}}),Ws=T({__name:"Footer",setup(a){const l=L(()=>t.isInStandaloneMode?100:80);return(i,r)=>(s(),p(G,null,[e(t).mobileLayout?(s(),p("div",{key:0,class:Y(i.$vuetify.theme.current.dark?"gradient-dark":"gradient-light"),style:`
      position: fixed;
      width: 100%;
      height: 180px;
      bottom: 0px;
      z-index: 999;
    `},null,2)):k("",!0),e(t).mobileLayout?(s(),h(Hs,{key:1,height:l.value},null,8,["height"])):k("",!0),u(ri,{app:"",color:"default",class:Y(`py-0 px-0 ${e(t).mobileLayout?"mediacontrols-player-float":"mediacontrols-player-default"}`)},{default:n(()=>[u(zs,{"use-floating-player":e(t).mobileLayout},null,8,["use-floating-player"])]),_:1},8,["class"])],64))}}),js={style:{float:"right"}},Ks={class:"player-content"},$t=3,Gs=T({__name:"PlayerSelect",setup(a){const l=Q(!1),i=Q([]),r=Q([]),d=Q(void 0),o=Q(""),{getPreference:c,setPreference:y}=wi(),w=c("allPlayersExpanded");ee(w,b=>{d.value=b?0:void 0},{immediate:!0}),ee(d,b=>{y("allPlayersExpanded",b===0)});const M=c("recentlySelectedPlayerIds");M.value&&(i.value=M.value);const A=b=>{let x=0;(b.playback_state===pe.PLAYING||b.playback_state===pe.PAUSED)&&(x+=2),b.player_id===Te.player_id&&(x+=2),b.current_media&&(x+=1);const $=i.value.indexOf(b.player_id);return $!==-1&&(x+=$t-$),x},S=()=>{const x=Object.values(V.players).filter($=>Ae($)).sort(($,P)=>{const C=A($),D=A(P);return D!==C?D-C:$.name.toUpperCase()>P.name.toUpperCase()?1:-1});r.value=x.map($=>$.player_id)},f=L(()=>Object.values(V.players).filter(b=>Ae(b)).sort((b,x)=>b.name.toUpperCase()>x.name?.toUpperCase()?1:-1)),R=L(()=>{if(o.value){const x=o.value.toLowerCase();return f.value.filter($=>$.name.toLowerCase().includes(x))}const b=te.value.map(x=>x.player_id);return f.value.filter(x=>!b.includes(x.player_id))}),O=L(()=>f.value.length>8),te=L(()=>Object.values(V.players).filter($=>Ae($)).filter($=>A($)>0).sort(($,P)=>{const C=r.value.indexOf($.player_id),D=r.value.indexOf(P.player_id);return C-D}).slice(0,3));ee(()=>t.showPlayersMenu,b=>{if(b)S();else{if(o.value="",t.activePlayerId){y("activePlayerId",t.activePlayerId),localStorage.setItem("activePlayerId",t.activePlayerId);const x=i.value.filter($=>$!==t.activePlayerId);x.unshift(t.activePlayerId),i.value=x.slice(0,$t)}y("recentlySelectedPlayerIds",i.value)}}),ee(()=>V.players,b=>{b&&ce()},{deep:!0}),ee(()=>Te.player_id,b=>{b&&ce()});function j(b,x=!1){t.activePlayerId!==b.player_id&&(t.activePlayerId=b.player_id,t.playerTipShown=!0),x&&(t.showPlayersMenu=!1),Ne(()=>{const $=document.getElementById(b.player_id);$&&$.scrollIntoView({behavior:"smooth",block:"nearest"})})}function ye(b){t.activePlayerId!==b.player_id?(t.activePlayerId=b.player_id,l.value=!0):l.value=!l.value,l.value&&Ne(()=>{const x=document.getElementById(b.player_id);x&&x.scrollIntoView({behavior:"smooth",block:"nearest"})})}ge(()=>{ce()});const ce=function(){if(t.activePlayer&&Ae(t.activePlayer))return;const b=z();b&&(t.activePlayerId=b)},z=function(){const b=localStorage.getItem("activePlayerId")||c("activePlayerId").value;if(b&&b in V.players&&V.players[b].available)return b;if(Te.player_id)return Te.player_id};return(b,x)=>(s(),p(G,null,[u(oi,{modelValue:e(t).showPlayersMenu,"onUpdate:modelValue":x[0]||(x[0]=$=>e(t).showPlayersMenu=$)},null,8,["modelValue"]),e(t).showPlayersMenu?(s(),h(pi,{key:0,modelValue:e(t).showPlayersMenu,"onUpdate:modelValue":x[4]||(x[4]=$=>e(t).showPlayersMenu=$),location:"right",app:"",clipped:"",temporary:"",width:460,style:{"z-index":"99999"},"z-index":"99999",color:"background"},{prepend:n(()=>[u(Be,{class:"title",style:{"padding-top":"20px","padding-bottom":"20px"}},{default:n(()=>[_("b",null,I(b.$t("players")),1),_("div",js,[e(Xt).isAdmin()?(s(),h(he,{key:0,variant:"icon",to:{name:"playersettings"}},{default:n(()=>[u(oe,{size:"24"},{default:n(()=>[...x[5]||(x[5]=[K("mdi-cog",-1)])]),_:1})]),_:1})):k("",!0),u(he,{variant:"icon",onClick:x[1]||(x[1]=$=>e(t).showPlayersMenu=!1)},{default:n(()=>[u(oe,{size:"24"},{default:n(()=>[...x[6]||(x[6]=[K("mdi-close",-1)])]),_:1})]),_:1})])]),_:1}),u(tt)]),default:n(()=>[_("div",Ks,[u(He,{flat:"",style:{margin:"0px 10px",padding:"0"}},{default:n(()=>[(s(!0),p(G,null,ue(te.value,$=>(s(),h(_t,{id:$.player_id,key:$.player_id,style:{margin:"10px 0px"},player:$,"show-volume-control":!0,"show-menu-button":!0,"show-sub-players":l.value&&$.player_id==e(t).activePlayerId,"show-sync-controls":$.supported_features.includes(e(_e).SET_MEMBERS),"allow-power-control":!0,onClick:P=>j($),onToggleExpand:ye},null,8,["id","player","show-sub-players","show-sync-controls","onClick"]))),128))]),_:1}),f.value.length>3?(s(),h(ni,{key:0,modelValue:d.value,"onUpdate:modelValue":x[3]||(x[3]=$=>d.value=$),variant:"accordion",flat:"",class:"expansion"},{default:n(()=>[u(ui,{style:{padding:"0"}},{default:n(()=>[u(ci,null,{default:n(()=>[_("h3",null,I(b.$t("all_players")),1)]),_:1}),u(di,{style:{padding:"0"}},{default:n(()=>[O.value?(s(),h(mi,{key:0,modelValue:o.value,"onUpdate:modelValue":x[2]||(x[2]=$=>o.value=$),placeholder:b.$t("search"),"prepend-inner-icon":"mdi-magnify",clearable:"",variant:"outlined",density:"compact","hide-details":"",style:{margin:"0 8px 24px 8px"}},null,8,["modelValue","placeholder"])):k("",!0),u(He,{flat:"",style:{margin:"-20px 3px 5px 3px"}},{default:n(()=>[(s(!0),p(G,null,ue(R.value,$=>(s(),h(_t,{id:$.player_id,key:$.player_id,style:{margin:"5px 0px"},player:$,"show-volume-control":!0,"show-menu-button":!0,"show-sub-players":l.value&&$.player_id==e(t).activePlayerId,"show-sync-controls":$.supported_features.includes(e(_e).SET_MEMBERS),"allow-power-control":!0,onClick:P=>j($),onToggleExpand:ye},null,8,["id","player","show-sub-players","show-sync-controls","onClick"]))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])):k("",!0)])]),_:1},8,["modelValue"])):k("",!0)],64))}}),Ys=ie(Gs,[["__scopeId","data-v-0347fc66"]]);function Xs(a={}){const{immediate:l=!1,onNeedRefresh:i,onOfflineReady:r,onRegistered:d,onRegisteredSW:o,onRegisterError:c}=a;let y,w,M;const A=async(f=!0)=>{await w,M?.()};async function S(){if("serviceWorker"in navigator){if(y=await Jt(async()=>{const{Workbox:f}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:f}},[],import.meta.url).then(({Workbox:f})=>new f("./sw.js",{scope:"./",type:"classic"})).catch(f=>{c?.(f)}),!y)return;M=()=>{y?.messageSkipWaiting()};{let f=!1;const R=()=>{f=!0,y?.addEventListener("controlling",O=>{O.isUpdate&&window.location.reload()}),i?.()};y.addEventListener("installed",O=>{typeof O.isUpdate>"u"?typeof O.isExternal<"u"&&O.isExternal?R():!f&&r?.():O.isUpdate||r?.()}),y.addEventListener("waiting",R)}y.register({immediate:l}).then(f=>{o?o("./sw.js",f):d?.(f)}).catch(f=>{c?.(f)})}}return w=S(),A}function Js(a={}){const{immediate:l=!0,onNeedRefresh:i,onOfflineReady:r,onRegistered:d,onRegisteredSW:o,onRegisterError:c}=a,y=Q(!1),w=Q(!1);return{updateServiceWorker:Xs({immediate:l,onNeedRefresh(){y.value=!0,i?.()},onOfflineReady(){w.value=!0,r?.()},onRegistered:d,onRegisteredSW:o,onRegisterError:c}),offlineReady:w,needRefresh:y}}const Zs={key:0,class:"pwa-toast",role:"alert"},er={class:"message"},tr={key:0},ar={key:1},ir=T({__name:"ReloadPrompt",setup(a){const{offlineReady:l,needRefresh:i,updateServiceWorker:r}=Js(),d=async()=>{l.value=!1,i.value=!1};return(o,c)=>e(l)||e(i)?(s(),p("div",Zs,[_("div",er,[e(l)?(s(),p("span",tr," App ready to work offline ")):(s(),p("span",ar," New content available, click on reload button to update. "))]),e(i)?(s(),p("button",{key:0,onClick:c[0]||(c[0]=y=>e(r)())},"Reload")):k("",!0),_("button",{onClick:d},"Close")])):k("",!0)}}),lr=T({__name:"Default",setup(a){const l=St();return ee([()=>l.query.player,()=>Object.keys(V.players).length],([i])=>{if(!i)return;const r=i.toString().toLowerCase(),d=Object.values(V.players).find(o=>o.player_id.toLowerCase()===r||o.name.toLowerCase()===r)?.player_id;d&&(t.activePlayerId=d)},{immediate:!0}),ee(()=>l.query.showFullscreenPlayer,i=>{t.showFullscreenPlayer=!!i},{immediate:!0}),ee(()=>l.query.frameless,i=>{i&&(t.frameless=!0)},{immediate:!0}),(i,r)=>(s(),p(G,null,[u(yi,null,{default:n(()=>[e(t).frameless?(s(),h(Pt,{key:0})):(s(),p(G,{key:1},[u(Ys),u(Pt),u(Ws)],64))]),_:1}),e(t).isInStandaloneMode?(s(),h(ir,{key:0})):k("",!0)],64))}}),Lr=ie(lr,[["__scopeId","data-v-f5755772"]]);export{Lr as default};
