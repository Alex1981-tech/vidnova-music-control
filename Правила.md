# Media Assistant Server - –ü—Ä–∞–≤–∏–ª–∞ —Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

## Production —Å–µ—Ä–≤–µ—Ä

**IP –∞–¥—Ä–µ—Å–∞:** `192.168.91.92`

**SSH –¥–æ—Å—Ç—É–ø:**
```bash
ssh serv@192.168.91.92
# –ü–∞—Ä–æ–ª—å: 258456
```

**–®–ª—è—Ö –ø—Ä–æ–µ–∫—Ç—É:** `/home/serv/music-assistant`

**–î–∞–Ω—ñ:** `/home/serv/music-assistant/data`

> **–ü—Ä–∏–º—ñ—Ç–∫–∞:** Production —Å–µ—Ä–≤–µ—Ä –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ –∑ 172.16.33.14 –Ω–∞ 192.168.91.92 (09.01.2026).
> –¢–µ–ø–µ—Ä —Å–µ—Ä–≤–µ—Ä –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ —Ç—ñ–π –∂–µ –º–µ—Ä–µ–∂—ñ —â–æ –π LinkPlay –ø—Ä–∏—Å—Ç—Ä–æ—ó (192.168.91.x).

---

## GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π

**URL:** https://github.com/Alex1981-tech/vidnova-music-control

**–ì—ñ–ª–∫–∞:** `main`

**–¢–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø—É:** –¥–∏–≤. `/root/WiiMplay_clinic/–Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –¥–ª—è –∫–ª–æ–¥–∞/–≥–µ—Ç—Ö–∞–±.md`

## CI/CD - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –¥–µ–ø–ª–æ–π

### GitHub Actions Runner (Production - 192.168.91.92)

–ù–∞ production —Å–µ—Ä–≤–µ—Ä—ñ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ self-hosted runner:
- **–ù–∞–∑–≤–∞:** `music-assistant-server`
- **–†–æ–∑—Ç–∞—à—É–≤–∞–Ω–Ω—è:** `/home/serv/actions-runner/`
- **–°–µ—Ä–≤—ñ—Å:** `actions.runner.Alex1981-tech-vidnova-music-control.music-assistant-server.service`

**–ö–µ—Ä—É–≤–∞–Ω–Ω—è —Ä–∞–Ω–Ω–µ—Ä–æ–º (–Ω–∞ 192.168.91.92):**
```bash
# –°—Ç–∞—Ç—É—Å
sudo systemctl status actions.runner.Alex1981-tech-vidnova-music-control.music-assistant-server.service

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
sudo systemctl restart actions.runner.Alex1981-tech-vidnova-music-control.music-assistant-server.service

# –õ–æ–≥–∏
journalctl -u actions.runner.Alex1981-tech-vidnova-music-control.music-assistant-server.service -f
```

### –°—Ç–∞—Ä–∏–π Runner (Dev —Å–µ—Ä–≤–µ—Ä - 172.16.33.14) - –ù–ï –í–ò–ö–û–†–ò–°–¢–û–í–£–Ñ–¢–¨–°–Ø

–ù–∞ —Å—Ç–∞—Ä–æ–º—É —Å–µ—Ä–≤–µ—Ä—ñ –∑–∞–ª–∏—à–∏–≤—Å—è runner (–≤–∏–º–∫–Ω–µ–Ω–∏–π):
- **–ù–∞–∑–≤–∞:** `vidnova-media-runner`
- **–†–æ–∑—Ç–∞—à—É–≤–∞–Ω–Ω—è:** `/opt/github-runner-media/`

### Workflow –¥–µ–ø–ª–æ—é

–ü—Ä–∏ –ø—É—à—ñ –≤ `main` –≥—ñ–ª–∫—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ:
1. –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É—î—Ç—å—Å—è –∫–æ–¥ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
2. –ó—É–ø–∏–Ω—è—î—Ç—å—Å—è —Å—Ç–∞—Ä–∏–π Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
3. –ë—É–¥—É—î—Ç—å—Å—è –Ω–æ–≤–∏–π Docker –æ–±—Ä–∞–∑
4. –ó–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è –Ω–æ–≤–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä

**–§–∞–π–ª workflow:** `.github/workflows/deploy.yml`

---

## –ü–æ—Ä—Ç–∏

### –¢–∞–±–ª–∏—Ü—è –ø–æ—Ä—Ç—ñ–≤

| –°–µ—Ä–≤—ñ—Å | Production | Test | –û–ø–∏—Å |
|--------|------------|------|------|
| **Web API** | 8095 | 10100 | –í–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ç–∞ WebSocket API |
| **Stream** | 8097 | 10101 | –°—Ç—Ä—ñ–º-—Å–µ—Ä–≤–µ—Ä (–∞—É–¥—ñ–æ –¥–ª—è –ø–ª–µ—î—Ä—ñ–≤) |
| **Sendspin** | 8927 | 10102 | –ü—Ä–æ—Ç–æ–∫–æ–ª —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–æ–≤–∞–Ω–æ–≥–æ –∞—É–¥—ñ–æ |

### –©–æ —Ç–∞–∫–µ Sendspin?

**Sendspin** - —Ü–µ –≤–±—É–¥–æ–≤–∞–Ω–∏–π –ø—Ä–æ—Ç–æ–∫–æ–ª —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–æ–≤–∞–Ω–æ–≥–æ –∞—É–¥—ñ–æ, —Ä–æ–∑—Ä–æ–±–ª–µ–Ω–∏–π Open Home Foundation. –í—ñ–Ω –¥–æ–∑–≤–æ–ª—è—î:

- **–°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–æ–≤–∞–Ω–µ –º—É–ª—å—Ç–∏—Ä—É–º –∞—É–¥—ñ–æ** - —Ç–æ—á–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –≤—ñ–¥—Ç–≤–æ—Ä–µ–Ω–Ω—è –º—ñ–∂ –ø—Ä–∏—Å—Ç—Ä–æ—è–º–∏
- **–í—ñ–¥—Ç–≤–æ—Ä–µ–Ω–Ω—è —É –±—Ä–∞—É–∑–µ—Ä—ñ** - —Å–ª—É—Ö–∞—Ç–∏ –º—É–∑–∏–∫—É –ø—Ä—è–º–æ —É –≤–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ñ —á–µ—Ä–µ–∑ WebRTC
- **–ú–æ–±—ñ–ª—å–Ω—ñ –¥–æ–¥–∞—Ç–∫–∏** - –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ iOS/Android –∫–ª—ñ—î–Ω—Ç—ñ–≤
- **–ê–ø–∞—Ä–∞—Ç–Ω—ñ –ø—Ä–∏—Å—Ç—Ä–æ—ó** - –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è ESPHome —Ç–∞ —ñ–Ω—à–∏—Ö –ø—Ä–∏—Å—Ç—Ä–æ—ó–≤

–ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è:
- –ë—Ä–∞—É–∑–µ—Ä: –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —á–µ—Ä–µ–∑ WebRTC
- –õ–æ–∫–∞–ª—å–Ω–∞ –º–µ—Ä–µ–∂–∞: `ws://<server-ip>:8927/sendspin`

---

## Production - Docker (192.168.91.92)

### –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä

- **–ù–∞–∑–≤–∞:** `music-assistant-server`
- **–û–±—Ä–∞–∑:** `music-assistant-server:latest`
- **–î–∞–Ω—ñ:** `/home/serv/music-assistant/data`
- **–ú–µ—Ä–µ–∂–∞:** `network_mode: host` (–ø—Ä—è–º–∏–π –¥–æ—Å—Ç—É–ø –¥–æ 192.168.91.xxx)

**–ö–µ—Ä—É–≤–∞–Ω–Ω—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º (SSH –Ω–∞ 192.168.91.92):**
```bash
# –°—Ç–∞—Ç—É—Å
docker ps | grep music-assistant-server

# –õ–æ–≥–∏
docker logs music-assistant-server --tail 100
docker logs music-assistant-server -f

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ docker-compose
cd /home/serv/music-assistant
docker compose restart

# –ü–æ–≤–Ω–∞ –ø–µ—Ä–µ–∑–±—ñ—Ä–∫–∞
cd /home/serv/music-assistant
docker compose down
docker compose build
docker compose up -d
```

### –î–æ—Å—Ç—É–ø

- **–í–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å:** http://192.168.91.92:8095
- **API:** ws://192.168.91.92:8095/ws
- **Stream Server:** http://192.168.91.92:8097

---

## Test/Dev - Host (systemd) –Ω–∞ 172.16.33.14

> **–ü—Ä–∏–º—ñ—Ç–∫–∞:** –¢–µ—Å—Ç–æ–≤–∏–π —Å–µ—Ä–≤–µ—Ä –∑–∞–ª–∏—à–∏–≤—Å—è –Ω–∞ —Å—Ç–∞—Ä–æ–º—É —Å–µ—Ä–≤–µ—Ä—ñ 172.16.33.14

### –°–µ—Ä–≤—ñ—Å

- **–ù–∞–∑–≤–∞:** `media-assistant-test.service`
- **–î–∞–Ω—ñ:** `/root/.musicassistant-test/`
- **Python:** `/root/server-2.8.0.dev2026010704/.venv/bin/python`

**–ö–µ—Ä—É–≤–∞–Ω–Ω—è —Ç–µ—Å—Ç–æ–≤–∏–º —Å–µ—Ä–≤–µ—Ä–æ–º (–Ω–∞ 172.16.33.14):**
```bash
# –ó–∞–ø—É—Å–∫
systemctl start media-assistant-test

# –ó—É–ø–∏–Ω–∫–∞
systemctl stop media-assistant-test

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
systemctl restart media-assistant-test

# –°—Ç–∞—Ç—É—Å
systemctl status media-assistant-test

# –õ–æ–≥–∏
journalctl -u media-assistant-test -f
journalctl -u media-assistant-test --tail 100
```

### –î–æ—Å—Ç—É–ø

- **–í–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å:** http://172.16.33.14:10100
- **API:** ws://172.16.33.14:10100/ws

### –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø–æ—Ä—Ç—ñ–≤

–ü–æ—Ä—Ç–∏ –Ω–∞–ª–∞—à—Ç–æ–≤—É—é—Ç—å—Å—è –≤ `/root/.musicassistant-test/settings.json`:
```json
{
  "core": {
    "webserver": {
      "values": { "bind_port": 10100 }
    },
    "streams": {
      "values": { "bind_port": 10101 }
    }
  }
}
```

Sendspin –ø–æ—Ä—Ç –Ω–∞–ª–∞—à—Ç–æ–≤—É—î—Ç—å—Å—è —á–µ—Ä–µ–∑ –∑–º—ñ–Ω–Ω—É `SENDSPIN_PORT` –≤ systemd —Å–µ—Ä–≤—ñ—Å—ñ (`/etc/systemd/system/media-assistant-test.service`).

---

## –î–∞–Ω—ñ (–ø–æ–≤–Ω—ñ—Å—Ç—é –∞–≤—Ç–æ–Ω–æ–º–Ω—ñ)

### Production (192.168.91.92): `/home/serv/music-assistant/data/`

### Test (172.16.33.14): `/root/.musicassistant-test/`

–í—Å—ñ –¥–∞–Ω—ñ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –Ω–∞ —Ö–æ—Å—Ç—ñ —ñ –ù–ï –≤–∏–¥–∞–ª—è—é—Ç—å—Å—è –ø—Ä–∏ –æ–Ω–æ–≤–ª–µ–Ω–Ω—ñ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:

| –§–∞–π–ª/–ü–∞–ø–∫–∞ | –û–ø–∏—Å |
|------------|------|
| `auth.db` | –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó |
| `library.db` | –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö –º—É–∑–∏—á–Ω–æ—ó –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ |
| `schedule.db` | –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö —Ä–æ–∑–∫–ª–∞–¥—ñ–≤ |
| `settings.json` | –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–µ—Ä–≤–µ—Ä–∞ (–≤–∫–ª—é—á–∞—é—á–∏ –ø–æ—Ä—Ç–∏) |
| `.cache/` | –ö–µ—à (–æ–±–∫–ª–∞–¥–∏–Ω–∫–∏, –º–µ—Ç–∞–¥–∞–Ω—ñ) |
| `music/` | –ú—É–∑–∏—á–Ω—ñ —Ñ–∞–π–ª–∏ |
| `video/` | –í—ñ–¥–µ–æ—Ñ–∞–π–ª–∏ |
| `video_thumbnails/` | –ú—ñ–Ω—ñ–∞—Ç—é—Ä–∏ –≤—ñ–¥–µ–æ |
| `playlists/` | –ü–ª–µ–π–ª–∏—Å—Ç–∏ |
| `announcements/` | –û–≥–æ–ª–æ—à–µ–Ω–Ω—è |

**–†–µ–∑–µ—Ä–≤–Ω–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è:**
```bash
# –ë–µ–∫–∞–ø production (–Ω–∞ 192.168.91.92)
ssh serv@192.168.91.92 "tar -czvf ~/backup/musicassistant-$(date +%Y%m%d).tar.gz ~/music-assistant/data/"

# –ë–µ–∫–∞–ø test (–Ω–∞ 172.16.33.14)
tar -czvf /root/backup/musicassistant-test-$(date +%Y%m%d).tar.gz /root/.musicassistant-test/
```

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

```
/root/server-2.8.0.dev2026010704/
‚îú‚îÄ‚îÄ music_assistant/          # –°–µ—Ä–≤–µ—Ä–Ω–∏–π –∫–æ–¥ (Python)
‚îú‚îÄ‚îÄ music_assistant_frontend/ # –í–±—É–¥–æ–≤–∞–Ω–∏–π —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ (Vue.js)
‚îú‚îÄ‚îÄ .venv/                    # Python virtual environment
‚îú‚îÄ‚îÄ Dockerfile.prod           # Docker –æ–±—Ä–∞–∑ –¥–ª—è production
‚îú‚îÄ‚îÄ docker-compose.prod.yml   # Docker Compose –∫–æ–Ω—Ñ—ñ–≥
‚îú‚îÄ‚îÄ .github/workflows/        # GitHub Actions
‚îÇ   ‚îî‚îÄ‚îÄ deploy.yml           # –ê–≤—Ç–æ–¥–µ–ø–ª–æ–π workflow
‚îú‚îÄ‚îÄ requirements_all.txt      # Python –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
‚îî‚îÄ‚îÄ pyproject.toml           # –ö–æ–Ω—Ñ—ñ–≥ –ø—Ä–æ–µ–∫—Ç—É
```

**Systemd —Å–µ—Ä–≤—ñ—Å–∏:**
- `/etc/systemd/system/media-assistant-test.service` - —Ç–µ—Å—Ç–æ–≤–∏–π —Å–µ—Ä–≤–µ—Ä

---

## –ú–µ—Ä–µ–∂–∞

### Production (192.168.91.92)
–°–µ—Ä–≤–µ—Ä –ø—Ä–∞—Ü—é—î –≤ —Ç—ñ–π –∂–µ –º–µ—Ä–µ–∂—ñ —â–æ –π LinkPlay –ø—Ä–∏—Å—Ç—Ä–æ—ó:
- **192.168.91.92** - IP —Å–µ—Ä–≤–µ—Ä–∞
- **192.168.91.xxx** - –º–µ—Ä–µ–∂–∞ LinkPlay –ø—Ä–∏—Å—Ç—Ä–æ—ó–≤ (WiiM, Muzo)

### Dev/Test (172.16.33.14)
–°—Ç–∞—Ä–∏–π —Å–µ—Ä–≤–µ—Ä, –∑–∞—Ä–∞–∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ –¥–ª—è —Ä–æ–∑—Ä–æ–±–∫–∏:
- **172.16.33.14** - IP —Å–µ—Ä–≤–µ—Ä–∞
- –ú–∞—î –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü—ñ—é –¥–æ 192.168.91.xxx

---

## –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–æ–¥—É

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)

–ù–∞ dev —Å–µ—Ä–≤–µ—Ä—ñ (172.16.33.14):
```bash
cd /root/server-2.8.0.dev2026010704
git add -A
git commit -m "–û–ø–∏—Å –∑–º—ñ–Ω"
git push origin main
# –î–µ–ø–ª–æ–π production –Ω–∞ 192.168.91.92 –≤—ñ–¥–±—É–¥–µ—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —á–µ—Ä–µ–∑ GitHub Actions
```

### –í—Ä—É—á–Ω—É –Ω–∞ Production (192.168.91.92)
```bash
ssh serv@192.168.91.92
cd /home/serv/music-assistant
git pull origin main
docker compose down
docker compose build
docker compose up -d
```

---

## –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥

### Production (192.168.91.92)
```bash
ssh serv@192.168.91.92

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤'—è
curl -s http://localhost:8095/ | head -20

# –õ–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker logs music-assistant-server --tail 100
docker logs music-assistant-server -f

# –°—Ç–∞—Ç—É—Å
docker ps | grep music-assistant-server

# –†–µ—Å—É—Ä—Å–∏
docker stats music-assistant-server --no-stream
```

### Test (172.16.33.14)
```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤'—è
curl -s http://localhost:10100/ | head -20

# –õ–æ–≥–∏
journalctl -u media-assistant-test --tail 100
journalctl -u media-assistant-test -f

# –°—Ç–∞—Ç—É—Å
systemctl status media-assistant-test
```

---

## LinkPlay - –¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ —Ç–∞ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è

### –í—ñ–¥–æ–º—ñ –ø—Ä–æ–±–ª–µ–º–∏ —Ç–∞ —Ä—ñ—à–µ–Ω–Ω—è

#### 1. HTTP Profile –¥–ª—è —Å—Ç—Ä—ñ–º—ñ–Ω–≥—É (–≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ 09.01.2026)

**–ü—Ä–æ–±–ª–µ–º–∞:** LinkPlay –ø—Ä–∏—Å—Ç—Ä–æ—ó –æ—Ç—Ä–∏–º—É–≤–∞–ª–∏ URL –¥–ª—è —Å—Ç—Ä—ñ–º—ñ–Ω–≥—É, –∞–ª–µ –≤—ñ–¥—Ä–∞–∑—É –∑—É–ø–∏–Ω—è–ª–∏—Å—å. –õ–æ–≥–∏ –ø–æ–∫–∞–∑—É–≤–∞–ª–∏:
```
üéµ Play command result: {'response': 'OK'}
Start Queue Flow stream for Queue Schedule: Test
```
–ê–ª–µ –ø–ª–µ—î—Ä –ø–æ–∫–∞–∑—É–≤–∞–≤ `status: stop`.

**–ü—Ä–∏—á–∏–Ω–∞:** LinkPlay –ø—Ä–∏—Å—Ç—Ä–æ—ó –ø–æ—Ç—Ä–µ–±—É—é—Ç—å –∑–∞–≥–æ–ª–æ–≤–æ–∫ `Content-Length` –≤ HTTP –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ. –ë–µ–∑ –Ω—å–æ–≥–æ –≤–æ–Ω–∏ –ø—Ä–∏–π–º–∞—é—Ç—å URL, –∞–ª–µ –Ω–µ –≤—ñ–¥—Ç–≤–æ—Ä—é—é—Ç—å –∞—É–¥—ñ–æ.

**–†—ñ—à–µ–Ω–Ω—è:** –î–æ–¥–∞–Ω–æ `CONF_ENTRY_HTTP_PROFILE_DEFAULT_3` (forced_content_length) –¥–æ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó LinkPlay –ø–ª–µ—î—Ä—ñ–≤.

**–§–∞–π–ª:** `music_assistant/providers/linkplay/player.py`
```python
async def get_config_entries(self, ...):
    return [
        *await super().get_config_entries(...),
        CONF_ENTRY_HTTP_PROFILE_DEFAULT_3,  # forced_content_length
    ]
```

#### 2. URL –∑ –∫—Ä–∞–ø–∫–∞–º–∏ (–≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ —Ä–∞–Ω—ñ—à–µ)

**–ü—Ä–æ–±–ª–µ–º–∞:** LinkPlay firmware –º–∞—î –±–∞–≥ - –∫—Ä–∞–ø–∫–∏ (`.`) –≤ URL —ñ–Ω—Ç–µ—Ä–ø—Ä–µ—Ç—É—é—Ç—å—Å—è —è–∫ —Ä–æ–∑–¥—ñ–ª—å–Ω–∏–∫–∏ –∫–æ–º–∞–Ω–¥.

**–ü—Ä–∏–∫–ª–∞–¥:**
- `http://server:8097/flow/test.flac` - –ù–ï –ø—Ä–∞—Ü—é—î
- `http://server:8097/flow/test.flac/` - –ø—Ä–∞—Ü—é—î

**–†—ñ—à–µ–Ω–Ω—è:** –í `player.py` –¥–æ–¥–∞–Ω–æ trailing slash –¥–æ –≤—Å—ñ—Ö URL:
```python
if not uri.endswith("/"):
    uri = uri + "/"
```

–í `streams_controller.py` –¥–æ–¥–∞–Ω–æ –º–∞—Ä—à—Ä—É—Ç –¥–ª—è URL –∑ trailing slash.

### –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ Multiroom

–ü—Ä–∏ multiroom –≥—Ä—É–ø—ñ:
- **Master** –ø—Ä–∏—Å—Ç—Ä—ñ–π –º–æ–∂–µ –ø–æ–∫–∞–∑—É–≤–∞—Ç–∏ `status: stop`, –∞–ª–µ `curpos` –∑—Ä–æ—Å—Ç–∞—î
- **Slave** –ø—Ä–∏—Å—Ç—Ä–æ—ó –ø–æ–∫–∞–∑—É—é—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π `status: play`
- Mode `99` –æ–∑–Ω–∞—á–∞—î slave –≤ multiroom –≥—Ä—É–ø—ñ

### –ö–æ—Ä–∏—Å–Ω—ñ –∫–æ–º–∞–Ω–¥–∏ –¥–ª—è –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

```bash
# –°—Ç–∞—Ç—É—Å –ø–ª–µ—î—Ä–∞ (–∑ production —Å–µ—Ä–≤–µ—Ä–∞)
curl -s "http://192.168.91.102:80/httpapi.asp?command=getPlayerStatus"

# –†–æ–∑—à–∏—Ä–µ–Ω–∏–π —Å—Ç–∞—Ç—É—Å –ø—Ä–∏—Å—Ç—Ä–æ—é
curl -s "http://192.168.91.102:80/httpapi.asp?command=getStatusEx"

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç—Ä—ñ–º—É –Ω–∞–ø—Ä—è–º—É
curl -sI "http://192.168.91.92:8097/flow/session/queue/item.flac/"
```

### LinkPlay API –ø–æ—Ä—Ç

LinkPlay –ø—Ä–∏—Å—Ç—Ä–æ—ó –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å **–ø–æ—Ä—Ç 80** (–Ω–µ 10443).

**–ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞:** `music_assistant/providers/linkplay/constants.py`
```python
LINKPLAY_DEFAULT_PORT = 80
```

### Sync Groups —Ç–∞ HTTP Profile

Sync groups –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –Ω–∞—Å–ª—ñ–¥—É—é—Ç—å `http_profile` –≤—ñ–¥ –¥–æ—á—ñ—Ä–Ω—ñ—Ö –ø–ª–µ—î—Ä—ñ–≤ —á–µ—Ä–µ–∑ –º–µ—Ç–æ–¥ `get_config_entries()` –≤ `SyncGroupPlayer`.

**–§–∞–π–ª:** `music_assistant/controllers/players/sync_groups.py` (—Ä—è–¥–∫–∏ 221-235)

---

## –í–∞–∂–ª–∏–≤–æ

1. **–ù–ï –≤–∏–¥–∞–ª—è–π—Ç–µ** `/home/serv/music-assistant/data/` –Ω–∞ 192.168.91.92 - —Ç–∞–º –≤—Å—ñ production –¥–∞–Ω—ñ!
2. **–ë–µ–∫–∞–ø—Ç–µ** —Ä–µ–≥—É–ª—è—Ä–Ω–æ –ø–∞–ø–∫—É –∑ –¥–∞–Ω–∏–º–∏
3. –ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å–ø–æ—á–∞—Ç–∫—É –¥–∏–≤—ñ—Ç—å—Å—è –ª–æ–≥–∏: `docker logs music-assistant-server --tail 100`
4. –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—é—Ç—å—Å—è –ø—Ä–∏ –ø–∞–¥—ñ–Ω–Ω—ñ (`restart: unless-stopped`)
5. Production (192.168.91.92) —ñ Test (172.16.33.14) –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å —Ä—ñ–∑–Ω—ñ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
6. Production —Å–µ—Ä–≤–µ—Ä —Ç–µ–ø–µ—Ä –≤ —Ç—ñ–π –∂–µ –º–µ—Ä–µ–∂—ñ —â–æ –π LinkPlay –ø—Ä–∏—Å—Ç—Ä–æ—ó - —Å—Ç—Ä—ñ–º—ñ–Ω–≥ –ø—Ä–∞—Ü—é—î –Ω–∞–ø—Ä—è–º—É
